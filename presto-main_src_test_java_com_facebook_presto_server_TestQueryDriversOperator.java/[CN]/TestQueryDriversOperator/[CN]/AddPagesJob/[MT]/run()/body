{
  try {
    for (    Page page : pages) {
      try {
        if (outputBuffer.addPage(page)) {
          pagesAdded.incrementAndGet();
        }
      }
 catch (      InterruptedException e) {
        outputBuffer.queryFailed(e);
        Thread.currentThread().interrupt();
        throw Throwables.propagate(e);
      }
    }
  }
  finally {
    outputBuffer.sourceFinished();
  }
}
