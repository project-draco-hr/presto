{
  checkArgument(value >= 0,"value must be >= 0");
  long nowInSeconds=TimeUnit.NANOSECONDS.toSeconds(ticker.read());
  int maxExpectedNodeCount=3 * calculateCompressionFactor();
  if (nowInSeconds - landmarkInSeconds >= RESCALE_THRESHOLD_SECONDS) {
    rescale(nowInSeconds);
    compress();
  }
 else   if (nonZeroNodeCount > MAX_SIZE_FACTOR * maxExpectedNodeCount && compressAutomatically) {
    compress();
  }
  double weight=weight(TimeUnit.NANOSECONDS.toSeconds(ticker.read())) * valueCount;
  weightedCount+=weight;
  max=Math.max(max,value);
  min=Math.min(min,value);
  insert(value,weight);
}
