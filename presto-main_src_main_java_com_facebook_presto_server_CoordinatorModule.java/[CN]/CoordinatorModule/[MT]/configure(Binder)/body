{
  httpServerBinder(binder).bindResource("/","webapp").withWelcomeFile("index.html");
  discoveryBinder(binder).bindSelector("presto");
  jaxrsBinder(binder).bind(QueryResource.class);
  jaxrsBinder(binder).bind(StageResource.class);
  binder.bind(QueryIdGenerator.class).in(Scopes.SINGLETON);
  binder.bind(QueryManager.class).to(SqlQueryManager.class).in(Scopes.SINGLETON);
  newExporter(binder).export(QueryManager.class).withGeneratedName();
  bindConfig(binder).to(QueryManagerConfig.class);
  bindConfig(binder).to(FeaturesConfig.class);
  binder.bind(SplitManager.class).in(Scopes.SINGLETON);
  binder.bind(InternalNodeManager.class).to(DiscoveryNodeManager.class).in(Scopes.SINGLETON);
  binder.bind(NodeManager.class).to(Key.get(InternalNodeManager.class)).in(Scopes.SINGLETON);
  bindConfig(binder).to(NodeSchedulerConfig.class);
  binder.bind(NodeScheduler.class).in(Scopes.SINGLETON);
  binder.bind(NodeTaskMap.class).in(Scopes.SINGLETON);
  newExporter(binder).export(NodeScheduler.class).withGeneratedName();
  binder.bind(ExecutorService.class).annotatedWith(ForQueryExecution.class).toInstance(newCachedThreadPool(threadsNamed("query-execution-%d")));
  binder.bind(QueryExecutionMBean.class).in(Scopes.SINGLETON);
  newExporter(binder).export(QueryExecutionMBean.class).as(generatedNameOf(QueryExecution.class));
  MapBinder<Class<? extends Statement>,QueryExecutionFactory<?>> executionBinder=newMapBinder(binder,new TypeLiteral<Class<? extends Statement>>(){
  }
,new TypeLiteral<QueryExecutionFactory<?>>(){
  }
);
  binder.bind(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(Query.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(Explain.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(ShowColumns.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(ShowPartitions.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(ShowFunctions.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(ShowTables.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(ShowSchemas.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(ShowCatalogs.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(Use.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(CreateTable.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  executionBinder.addBinding(Insert.class).to(SqlQueryExecutionFactory.class).in(Scopes.SINGLETON);
  binder.bind(DataDefinitionExecutionFactory.class).in(Scopes.SINGLETON);
  bindDataDefinitionTask(binder,executionBinder,RenameTable.class,RenameTableTask.class);
  bindDataDefinitionTask(binder,executionBinder,DropTable.class,DropTableTask.class);
  bindDataDefinitionTask(binder,executionBinder,CreateView.class,CreateViewTask.class);
  bindDataDefinitionTask(binder,executionBinder,DropView.class,DropViewTask.class);
  jsonCodecBinder(binder).bindJsonCodec(ViewDefinition.class);
}
