{
  Query query=statement.getQuery();
  String sql=formatSql(query);
  Statement parsed;
  try {
    parsed=sqlParser.createStatement(sql);
  }
 catch (  ParsingException e) {
    throw new PrestoException(INTERNAL_ERROR,"Formatted query does not parse: " + query);
  }
  if (!query.equals(parsed)) {
    throw new PrestoException(INTERNAL_ERROR,"Query does not round-trip: " + query);
  }
  return sql;
}
