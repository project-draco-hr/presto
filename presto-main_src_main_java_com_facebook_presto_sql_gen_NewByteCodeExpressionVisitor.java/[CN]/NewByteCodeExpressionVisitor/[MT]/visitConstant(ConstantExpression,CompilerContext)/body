{
  Object value=constant.getValue();
  Class<?> javaType=constant.getType().getJavaType();
  Block block=new Block(context);
  if (value == null) {
    return block.comment("constant null").putVariable("wasNull",true).pushJavaDefault(javaType);
  }
  block.comment("constant " + constant.getType().getName());
  if (javaType == boolean.class) {
    return block.append(loadBoolean((Boolean)value));
  }
  if (javaType == byte.class || javaType == short.class || javaType == int.class) {
    return block.append(loadInt(((Number)value).intValue()));
  }
  if (javaType == long.class) {
    return block.append(loadLong((Long)value));
  }
  if (javaType == float.class) {
    return block.append(loadFloat((Float)value));
  }
  if (javaType == double.class) {
    return block.append(loadDouble((Double)value));
  }
  if (javaType == String.class) {
    return block.append(loadString((String)value));
  }
  FunctionBinding binding=bootstrapFunctionBinder.bindConstant(value,constant.getType());
  return new Block(context).setDescription("constant " + constant.getType()).comment(constant.toString()).invokeDynamic(binding.getName(),binding.getCallSite().type(),binding.getBindingId());
}
