{
  while (true) {
    QueryInfo currentQueryInfo=queryInfoHolder.get();
    QueryInfo newQueryInfo=currentQueryInfo.addFailure(FailureInfo.toFailure(t));
    if (queryInfoHolder.compareAndSet(currentQueryInfo,newQueryInfo)) {
      return;
    }
  }
}
