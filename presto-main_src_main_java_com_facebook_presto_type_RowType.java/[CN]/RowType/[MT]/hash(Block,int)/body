{
  List<Object> elements=extractElements(block,position);
  int result=1;
  int nFields=elements.size();
  for (int i=0; i < nFields; i++) {
    Object element=elements.get(i);
    checkElementNotNull(element);
    Type elementType=fields.get(i).getType();
    result=31 * result + elementType.hash(createBlock(elementType,element),0);
  }
  return result;
}
