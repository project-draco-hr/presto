{
  this.dataStreamProvider=checkNotNull(dataStreamProvider,"dataStreamProvider is null");
  this.queryTaskInfoCodec=checkNotNull(queryTaskInfoCodec,"queryTaskInfoCodec is null");
  int processors=Runtime.getRuntime().availableProcessors();
  executor=new ThreadPoolExecutor(processors,processors,1,TimeUnit.MINUTES,new SynchronousQueue<Runnable>(),threadsNamed("shard-query-processor-%d"),new ThreadPoolExecutor.CallerRunsPolicy());
  httpClient=new ApacheHttpClient(new HttpClientConfig().setConnectTimeout(new Duration(5,TimeUnit.SECONDS)).setReadTimeout(new Duration(5,TimeUnit.SECONDS)));
  this.pageBufferMax=10;
}
