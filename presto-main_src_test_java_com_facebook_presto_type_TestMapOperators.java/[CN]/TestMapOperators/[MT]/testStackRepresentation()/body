{
  Slice array=ArrayType.toStackRepresentation(ImmutableList.of(1L,2L),BigintType.BIGINT);
  Slice slice=toStackRepresentation(ImmutableMap.of(1.0,array),DoubleType.DOUBLE,new ArrayType(BigintType.BIGINT));
  DynamicSliceOutput output=new DynamicSliceOutput(100);
  output.appendInt(2).appendInt(8).appendInt(33).appendByte(0).appendInt(41).appendDouble(1.0).appendInt(2).appendInt(8).appendInt(8).appendByte(0).appendInt(16).appendLong(1).appendLong(2);
  assertEquals(slice,output.slice());
}
