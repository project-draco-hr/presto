{
  Preconditions.checkNotNull(config,"config is null");
  streamRateDecayAlpha=ExponentialDecay.seconds(Ints.checkedCast(config.getStreamRateDecay().roundTo(SECONDS)));
  minMonitorThreshold=config.getMinMonitorThreshold();
  minStreamSamplingTime=config.getMinStreamSamplingTime();
  minGlobalSamples=config.getMinGlobalSamples();
  minStreamRate=config.getMinStreamRate();
  slowStreamPercentile=config.getSlowStreamPercentile();
  Duration unfavoredNodeCacheTime=config.getUnfavoredNodeCacheTime();
  unfavoredNodes=CacheBuilder.newBuilder().expireAfterWrite(unfavoredNodeCacheTime.toMillis(),TimeUnit.MILLISECONDS).build();
  Duration globalDistributionDecay=config.getGlobalDistributionDecay();
  globalDistribution=new Distribution2(ExponentialDecay.seconds(Ints.checkedCast(globalDistributionDecay.roundTo(SECONDS))));
}
