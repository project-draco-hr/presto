{
  Map<Symbol,Symbol> outputToSourceMap=FluentIterable.from(lookupSymbols).toMap(Functions.compose(symbolFromReferenceGetter(),Functions.forMap(node.getOutputMap())));
  Map<Symbol,Symbol> sourceToIndexMap=node.getSource().accept(this,ImmutableSet.copyOf(outputToSourceMap.values()));
  return FluentIterable.from(lookupSymbols).toMap(Functions.compose(Functions.forMap(sourceToIndexMap),Functions.forMap(outputToSourceMap)));
}
