{
  if (state == State.FINISHING || state == State.FINISHED) {
    return;
  }
  if (state == State.NEEDS_INPUT) {
    sortPagesIndexIfNecessary();
  }
  state=State.FINISHING;
}
