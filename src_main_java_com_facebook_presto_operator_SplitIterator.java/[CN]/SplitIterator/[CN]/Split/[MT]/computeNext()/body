{
  if (queue.isEmpty()) {
switch (bufferNewBlock()) {
case MUST_YIELD:
      return setMustYield();
case FINISHED:
    return endOfData();
}
}
return queue.removeFirst();
}
