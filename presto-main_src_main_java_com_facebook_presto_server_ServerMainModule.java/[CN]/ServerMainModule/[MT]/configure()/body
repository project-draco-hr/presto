{
  binder.bind(QueryResource.class).in(Scopes.SINGLETON);
  binder.bind(QueryManager.class).to(SqlQueryManager.class).in(Scopes.SINGLETON);
  bindConfig(binder).to(QueryManagerConfig.class);
  binder.bind(StageResource.class).in(Scopes.SINGLETON);
  binder.bind(StageManager.class).to(SqlStageManager.class).in(Scopes.SINGLETON);
  binder.bind(TaskResource.class).in(Scopes.SINGLETON);
  binder.bind(TaskManager.class).to(SqlTaskManager.class).in(Scopes.SINGLETON);
  jsonCodecBinder(binder).bindJsonCodec(TaskInfo.class);
  binder.bind(PagesMapper.class).in(Scopes.SINGLETON);
  binder.bind(LocationFactory.class).to(HttpLocationFactory.class).in(Scopes.SINGLETON);
  binder.bind(RemoteTaskFactory.class).to(HttpRemoteTaskFactory.class).in(Scopes.SINGLETON);
  HttpClientBinder.httpClientBinder(binder).bindHttpClient("exchange",ForExchange.class).withTracing();
  HttpClientBinder.httpClientBinder(binder).bindHttpClient("scheduler",ForScheduler.class).withTracing();
  binder.bind(PlanFragmentSourceProvider.class).to(HackPlanFragmentSourceProvider.class).in(Scopes.SINGLETON);
  bindConfig(binder).to(StorageManagerConfig.class);
  binder.bind(StorageManager.class).to(DatabaseStorageManager.class).in(Scopes.SINGLETON);
  binder.bind(DataStreamProvider.class).to(DataStreamManager.class).in(Scopes.SINGLETON);
  binder.bind(NativeDataStreamProvider.class).in(Scopes.SINGLETON);
  binder.bind(ImportDataStreamProvider.class).in(Scopes.SINGLETON);
  binder.bind(Metadata.class).to(MetadataManager.class).in(Scopes.SINGLETON);
  binder.bind(NativeMetadata.class).in(Scopes.SINGLETON);
  binder.bind(InternalMetadata.class).in(Scopes.SINGLETON);
  binder.bind(InternalDataStreamProvider.class).in(Scopes.SINGLETON);
  binder.bind(InformationSchemaMetadata.class).in(Scopes.SINGLETON);
  binder.bind(InformationSchemaData.class).in(Scopes.SINGLETON);
  binder.bind(SystemTables.class).in(Scopes.SINGLETON);
  binder.bind(ImportClientFactory.class).in(Scopes.SINGLETON);
  binder.bind(ImportMetadata.class).in(Scopes.SINGLETON);
  binder.bind(SplitManager.class).in(Scopes.SINGLETON);
  jsonCodecBinder(binder).bindJsonCodec(QueryFragmentRequest.class);
  JsonBinder.jsonBinder(binder).addSerializerBinding(Expression.class).toInstance(new JsonSerializer<Expression>(){
    @Override public void serialize(    Expression expression,    JsonGenerator jsonGenerator,    SerializerProvider serializerProvider) throws IOException {
      jsonGenerator.writeString(ExpressionFormatter.toString(expression));
    }
  }
);
  JsonBinder.jsonBinder(binder).addDeserializerBinding(Expression.class).toInstance(new JsonDeserializer<Expression>(){
    @Override public Expression deserialize(    JsonParser jsonParser,    DeserializationContext deserializationContext) throws IOException {
      try {
        return SqlParser.createExpression(jsonParser.readValueAs(String.class));
      }
 catch (      RecognitionException e) {
        throw Throwables.propagate(e);
      }
    }
  }
);
  JsonBinder.jsonBinder(binder).addDeserializerBinding(FunctionCall.class).toInstance(new JsonDeserializer<FunctionCall>(){
    @Override public FunctionCall deserialize(    JsonParser jsonParser,    DeserializationContext deserializationContext) throws IOException {
      try {
        return (FunctionCall)SqlParser.createExpression(jsonParser.readValueAs(String.class));
      }
 catch (      RecognitionException e) {
        throw Throwables.propagate(e);
      }
    }
  }
);
  discoveryBinder(binder).bindSelector("presto");
  discoveryBinder(binder).bindSelector("hive-metastore");
  binder.bind(NodeManager.class).in(Scopes.SINGLETON);
  binder.bind(NodeWorkerQueue.class).in(Scopes.SINGLETON);
  binder.bind(ShardManager.class).to(DatabaseShardManager.class).in(Scopes.SINGLETON);
  binder.bind(ImportManager.class).in(Scopes.SINGLETON);
  httpClientBinder(binder).bindHttpClient("importer",ForImportManager.class).withFilter(NodeIdUserAgentRequestFilter.class);
  binder.bind(LocalShardManager.class).in(Scopes.SINGLETON);
  binder.bind(ShardResource.class).in(Scopes.SINGLETON);
  jsonCodecBinder(binder).bindJsonCodec(ShardImport.class);
  discoveryBinder(binder).bindHttpAnnouncement("presto");
  bindDataSource("presto-metastore",ForMetadata.class,ForShardManager.class);
}
