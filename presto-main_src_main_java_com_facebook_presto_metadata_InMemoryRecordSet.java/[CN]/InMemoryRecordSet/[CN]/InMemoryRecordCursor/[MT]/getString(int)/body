{
  Preconditions.checkState(record != null,"no current record");
  Object value=record.get(field);
  checkNotNull(value,"value is null");
  if (value instanceof byte[]) {
    return (byte[])value;
  }
  if (value instanceof String) {
    return ((String)value).getBytes(Charsets.UTF_8);
  }
  throw new IllegalArgumentException("Field " + field + " is not a String, but is a "+ value.getClass().getName());
}
