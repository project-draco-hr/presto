{
  if (!context.isDefaultRewrite()) {
    Node result=nodeRewriter.rewriteFunctionCall(node,context.get(),TreeRewriter.this);
    if (result != null) {
      return result;
    }
  }
  Window window=node.getWindow().orNull();
  if (window != null) {
    ImmutableList.Builder<Expression> partitionBy=ImmutableList.builder();
    for (    Expression expression : node.getWindow().get().getPartitionBy()) {
      partitionBy.add(rewrite(expression,context.get()));
    }
    ImmutableList.Builder<SortItem> orderBy=ImmutableList.builder();
    for (    SortItem sortItem : node.getWindow().get().getOrderBy()) {
      orderBy.add(rewrite(sortItem,context.get()));
    }
    if (!sameElements(window.getPartitionBy(),partitionBy.build()) || !sameElements(window.getOrderBy(),orderBy.build())) {
      window=new Window(partitionBy.build(),orderBy.build(),window.getFrame().orNull());
    }
  }
  ImmutableList.Builder<Expression> arguments=ImmutableList.builder();
  for (  Expression expression : node.getArguments()) {
    arguments.add(rewrite(expression,context.get()));
  }
  if (!sameElements(node.getArguments(),arguments.build()) || (window != node.getWindow().orNull())) {
    return new FunctionCall(node.getName(),window,node.isDistinct(),arguments.build());
  }
  return node;
}
