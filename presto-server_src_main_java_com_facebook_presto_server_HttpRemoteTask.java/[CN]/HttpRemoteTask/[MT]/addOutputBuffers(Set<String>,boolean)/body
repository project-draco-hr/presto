{
synchronized (this) {
    Preconditions.checkState(!noMoreOutputIds || outputBuffers.containsAll(outputBuffers),"Buffers can not be added after noMoreOutputIds has been set");
    noMoreOutputIds=noMore;
    this.outputIds.addAll(outputBuffers);
  }
  updateState(false);
}
