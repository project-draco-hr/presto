{
  final TaskInfo taskInfo=this.taskInfo.get();
  if ((taskInfo.getState() == TaskState.PLANNED) || taskInfo.getState().isDone()) {
    return Futures.immediateFuture(null);
  }
  URI statusUri=uriBuilderFrom(taskInfo.getSelf()).build();
  Request request=prepareGet().setUri(statusUri).build();
  ListenableFuture<JsonResponse<TaskInfo>> future=httpClient.executeAsync(request,createFullJsonResponseHandler(taskInfoCodec));
  return chainedCallback(future,new FutureCallback<JsonResponse<TaskInfo>>(){
    @Override public void onSuccess(    JsonResponse<TaskInfo> response){
      if (response.getStatusCode() == HttpStatus.GONE.code()) {
        updateTaskInfo(new TaskInfo(taskInfo.getQueryId(),taskInfo.getStageId(),taskInfo.getTaskId(),TaskInfo.MAX_VERSION,TaskState.CANCELED,taskInfo.getSelf(),taskInfo.getOutputBuffers(),taskInfo.getNoMoreSplits(),taskInfo.getStats(),ImmutableList.<FailureInfo>of()));
      }
 else {
        checkState(response.getStatusCode() == HttpStatus.OK.code(),"Expected response code to be %s, but was %s: %s",HttpStatus.OK.code(),response.getStatusCode(),response.getStatusMessage());
        updateTaskInfo(response.getValue());
      }
    }
    @Override public void onFailure(    Throwable t){
      logRequestFailure("Error updating",taskInfo,t);
    }
  }
);
}
