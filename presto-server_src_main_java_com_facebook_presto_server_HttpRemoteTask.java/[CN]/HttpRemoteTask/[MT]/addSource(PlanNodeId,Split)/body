{
  TaskInfo taskInfo=this.taskInfo.get();
  if (taskInfo.getState().isDone()) {
    return;
  }
  URI sourceUri=uriBuilderFrom(taskInfo.getSelf()).appendPath("source").appendPath(sourceId.toString()).build();
  Request request=preparePost().setUri(sourceUri).setHeader(HttpHeaders.CONTENT_TYPE,MediaType.APPLICATION_JSON).setBodyGenerator(JsonBodyGenerator.jsonBodyGenerator(splitCodec,split)).build();
  JsonResponse<TaskInfo> response=httpClient.execute(request,createFullJsonResponseHandler(taskInfoCodec));
  updateTaskInfo(response);
  if (response.getStatusCode() != 200 && response.getStatusCode() != 404) {
    throw new RuntimeException(String.format("Error adding split to source '%s' in task %s",sourceId,taskInfo.getTaskId()));
  }
}
