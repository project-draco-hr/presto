{
  Preconditions.checkState(!Thread.holdsLock(HttpRemoteTask.this),"Update state can not be called while holding a lock on HttpRemoteTask.this");
  Future<?> requestToCancel;
synchronized (HttpRemoteTask.this) {
    requestToCancel=requestFuture;
  }
  if (requestToCancel != null) {
    requestFuture.cancel(true);
  }
  return super.cancel(true);
}
