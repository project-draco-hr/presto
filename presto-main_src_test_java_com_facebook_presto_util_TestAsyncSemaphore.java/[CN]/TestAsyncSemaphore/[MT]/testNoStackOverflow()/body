{
  AsyncSemaphore<Object> asyncSemaphore=new AsyncSemaphore<>(1,executor,new Function<Object,ListenableFuture<?>>(){
    @Override public ListenableFuture<?> apply(    Object object){
      return Futures.immediateFuture(null);
    }
  }
);
  List<ListenableFuture<?>> futures=new ArrayList<>();
  for (int i=0; i < 1000; i++) {
    futures.add(asyncSemaphore.submit(new Object()));
  }
  Futures.allAsList(futures).get(1,TimeUnit.MINUTES);
}
