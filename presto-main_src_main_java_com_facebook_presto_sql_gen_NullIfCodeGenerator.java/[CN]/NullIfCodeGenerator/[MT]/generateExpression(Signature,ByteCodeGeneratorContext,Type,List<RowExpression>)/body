{
  CompilerContext context=generatorContext.getContext();
  RowExpression first=arguments.get(0);
  RowExpression second=arguments.get(1);
  LabelNode notMatch=new LabelNode("notMatch");
  Block block=new Block().comment("check if first arg is null").append(generatorContext.generate(first)).append(ByteCodeUtils.ifWasNullPopAndGoto(context,notMatch,void.class));
  Type firstType=first.getType();
  Type secondType=second.getType();
  Type commonType=FunctionRegistry.getCommonSuperType(firstType,secondType).get();
  FunctionInfo equalsFunction=generatorContext.getRegistry().resolveOperator(OperatorType.EQUAL,ImmutableList.of(firstType,secondType));
  ByteCodeNode equalsCall=generatorContext.generateCall(equalsFunction,ImmutableList.of(cast(generatorContext,new Block().dup(firstType.getJavaType()),firstType,commonType),cast(generatorContext,generatorContext.generate(second),secondType,commonType)));
  Block conditionBlock=new Block().append(equalsCall).append(ByteCodeUtils.ifWasNullClearPopAndGoto(context,notMatch,void.class,boolean.class));
  Block trueBlock=new Block().append(generatorContext.wasNull().set(constantTrue())).pop(first.getType().getJavaType()).pushJavaDefault(first.getType().getJavaType());
  block.append(new IfStatement().condition(conditionBlock).ifTrue(trueBlock).ifFalse(notMatch));
  return block;
}
