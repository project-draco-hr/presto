{
  CompilerContext context=generatorContext.getContext();
  RowExpression first=arguments.get(0);
  RowExpression second=arguments.get(1);
  LabelNode notMatch=new LabelNode("notMatch");
  Block block=new Block(context).comment("check if first arg is null").append(generatorContext.generate(first)).append(ByteCodeUtils.ifWasNullPopAndGoto(context,notMatch,void.class));
  Type firstType=first.getType();
  Type secondType=second.getType();
  Type commonType=FunctionRegistry.getCommonSuperType(firstType,secondType).get();
  FunctionInfo equalsFunction=generatorContext.getRegistry().resolveOperator(OperatorType.EQUAL,ImmutableList.of(firstType,secondType));
  ByteCodeNode equalsCall=generatorContext.generateCall(equalsFunction,ImmutableList.of(cast(generatorContext,new Block(context).dup(firstType.getJavaType()),firstType,commonType),cast(generatorContext,generatorContext.generate(second),secondType,commonType)));
  Block conditionBlock=new Block(context).append(equalsCall).append(ByteCodeUtils.ifWasNullClearPopAndGoto(context,notMatch,void.class,boolean.class));
  Block trueBlock=new Block(context).putVariable("wasNull",true).pop(first.getType().getJavaType()).pushJavaDefault(first.getType().getJavaType());
  block.append(new IfStatement(conditionBlock,trueBlock,notMatch));
  return block;
}
