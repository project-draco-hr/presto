{
  checkNotNull(outputBuffers,"outputBuffers is null");
  checkNotNull(bufferId,"bufferId is null");
  checkState(!outputBuffers.isNoMoreBufferIds(),"No more buffer ids already set");
  return new OutputBuffers(outputBuffers.getVersion() + 1,false,ImmutableSet.<String>builder().addAll(outputBuffers.getBufferIds()).add(bufferId).build());
}
