{
  LOGGER.info("Running benchmark: %s",getBenchmarkName());
  long start=System.nanoTime();
  setUp();
  try {
    for (int i=0; i < warmupIterations; i++) {
      runOnce();
    }
    for (int i=0; i < measuredIterations; i++) {
      Map<String,Long> results=runOnce();
      if (benchmarkResultHook != null) {
        benchmarkResultHook.addResults(results);
      }
    }
  }
  finally {
    tearDown();
  }
  if (benchmarkResultHook != null) {
    benchmarkResultHook.finished();
  }
  Duration duration=Duration.nanosSince(start);
  LOGGER.info("Finished benchmark: %s, Elapsed: %s",getBenchmarkName(),duration);
}
