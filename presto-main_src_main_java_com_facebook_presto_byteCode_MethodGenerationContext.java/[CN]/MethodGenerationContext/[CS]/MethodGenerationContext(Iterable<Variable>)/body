{
  ImmutableMap.Builder<Variable,Integer> variableSlots=ImmutableMap.builder();
  int nextSlot=0;
  for (  Variable variable : variables) {
    checkArgument(!"this".equals(variable.getName()) || nextSlot == 0,"The 'this' variable must be in slot 0");
    variableSlots.put(variable,nextSlot);
    nextSlot+=Type.getType(variable.getType().getType()).getSize();
  }
  this.variableSlots=variableSlots.build();
}
