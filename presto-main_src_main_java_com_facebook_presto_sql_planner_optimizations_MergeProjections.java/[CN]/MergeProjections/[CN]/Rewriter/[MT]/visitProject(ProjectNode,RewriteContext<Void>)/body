{
  PlanNode source=context.rewrite(node.getSource());
  if (source instanceof ProjectNode) {
    ImmutableMap.Builder<Symbol,Expression> projections=ImmutableMap.builder();
    for (    Map.Entry<Symbol,Expression> projection : node.getAssignments().entrySet()) {
      Expression inlined=ExpressionTreeRewriter.rewriteWith(new ExpressionSymbolInliner(((ProjectNode)source).getAssignments()),projection.getValue());
      projections.put(projection.getKey(),inlined);
    }
    return new ProjectNode(node.getId(),((ProjectNode)source).getSource(),projections.build());
  }
  return replaceChildren(node,ImmutableList.of(source));
}
