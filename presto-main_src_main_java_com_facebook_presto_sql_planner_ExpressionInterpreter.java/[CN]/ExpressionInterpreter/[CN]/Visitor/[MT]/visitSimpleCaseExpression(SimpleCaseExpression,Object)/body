{
  Object operand=process(node.getOperand(),context);
  if (operand instanceof Expression) {
    return node;
  }
  Expression resultClause=node.getDefaultValue();
  if (operand != null) {
    for (    WhenClause whenClause : node.getWhenClauses()) {
      Object value=process(whenClause.getOperand(),context);
      if (value instanceof Expression) {
        return node;
      }
      if (operand instanceof Long && value instanceof Long) {
        if (((Long)operand).longValue() == ((Long)value).longValue()) {
          resultClause=whenClause.getResult();
          break;
        }
      }
 else       if (operand instanceof Double && value instanceof Double) {
        if (((Double)operand).doubleValue() == ((Double)value).doubleValue()) {
          resultClause=whenClause.getResult();
          break;
        }
      }
 else       if (operand.equals(value)) {
        resultClause=whenClause.getResult();
        break;
      }
    }
  }
  if (resultClause == null) {
    return null;
  }
  Object result=process(resultClause,context);
  if (result instanceof Expression) {
    return node;
  }
  return result;
}
