{
  Object value=process(node.getValue(),context);
  if (!(value instanceof Slice)) {
    return node;
  }
  Slice valueSlice=((Slice)value);
  Matcher matcher;
  if (node.getPattern() instanceof StringLiteral && (node.getEscape() instanceof StringLiteral || node.getEscape() == null)) {
    matcher=getConstantPattern(node).matcher(valueSlice.getBytes());
  }
 else {
    Object pattern=process(node.getPattern(),context);
    if (!(pattern instanceof Slice)) {
      return node;
    }
    String patternString=((Slice)pattern).toString(UTF_8);
    char escapeChar;
    if (node.getEscape() != null) {
      Object escape=process(node.getEscape(),context);
      if (!(escape instanceof Slice)) {
        return node;
      }
      escapeChar=getEscapeChar((Slice)escape);
    }
 else {
      escapeChar='\\';
    }
    matcher=likeToPattern(patternString,escapeChar).matcher(valueSlice.getBytes());
  }
  int match=matcher.match(0,valueSlice.length(),Option.NONE);
  return match != -1;
}
