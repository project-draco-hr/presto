{
  State overallState=taskState.get();
  if (!overallState.isDone()) {
    Map<String,State> outputBufferStates=getOutputBufferStates();
    if (Iterables.any(outputBufferStates.values(),equalTo(State.FAILED))) {
      taskState.set(State.FAILED);
      finishAllBuffers();
    }
 else     if (Iterables.all(outputBufferStates.values(),equalTo(State.FINISHED))) {
      taskState.set(State.FINISHED);
    }
  }
}
