{
  try {
    ListenableFuture<?> future=submitter.apply(task);
    if (future == null) {
      return Futures.immediateFailedFuture(new NullPointerException("Submitter returned a null future for task: " + task));
    }
    return future;
  }
 catch (  Exception e) {
    return Futures.immediateFailedFuture(e);
  }
}
