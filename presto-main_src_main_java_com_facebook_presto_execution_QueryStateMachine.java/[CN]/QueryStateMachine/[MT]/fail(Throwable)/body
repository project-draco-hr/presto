{
synchronized (this) {
    if (endTime == null) {
      endTime=DateTime.now();
    }
  }
synchronized (this) {
    if (cause != null) {
      if (failureCause == null) {
        failureCause=cause;
      }
 else {
        failureCause.addSuppressed(cause);
      }
    }
  }
  return queryState.setIf(FAILED,Predicates.not(inDoneState()));
}
