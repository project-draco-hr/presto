{
  return new Function<FileSystem,FileSystem>(){
    @Override public FileSystem apply(    FileSystem fileSystem){
      return new ForwardingFileSystem(fileSystem){
        @Override public FSDataInputStream open(        Path f,        int bufferSize) throws IOException {
          try (ThreadContextClassLoader ignored=new ThreadContextClassLoader(classLoader)){
            return super.open(f,bufferSize);
          }
         }
        @Override public FSDataInputStream open(        Path f) throws IOException {
          try (ThreadContextClassLoader ignored=new ThreadContextClassLoader(classLoader)){
            return super.open(f);
          }
         }
      }
;
    }
  }
;
}
