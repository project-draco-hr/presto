{
  try (Pager pager=Pager.create();Writer writer=createWriter(pager);OutputHandler handler=createOutputHandler(format,writer,fieldNames)){
    if (!pager.isNullPager()) {
      ignoreUserInterrupt.set(true);
    }
    handler.processRows(client);
  }
 catch (  RuntimeException|IOException e) {
    if (userAbortedQuery.get() && !(e instanceof QueryAbortedException)) {
      throw new QueryAbortedException(e);
    }
    throw e;
  }
}
