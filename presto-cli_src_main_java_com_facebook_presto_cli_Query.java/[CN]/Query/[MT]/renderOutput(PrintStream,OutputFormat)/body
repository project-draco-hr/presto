{
  SignalHandler oldHandler=Signal.handle(SIGINT,new SignalHandler(){
    @Override public void handle(    Signal signal){
      if (ignoreUserInterrupt.get() || client.isClosed()) {
        return;
      }
      try {
        if (!client.cancelLeafStage()) {
          client.close();
        }
      }
 catch (      RuntimeException e) {
        log.debug(e,"error canceling leaf stage");
        client.close();
      }
    }
  }
);
  try {
    renderQueryOutput(out,outputFormat);
  }
  finally {
    Signal.handle(SIGINT,oldHandler);
  }
}
