{
  if (Iterables.any(fragment.getSources(),instanceOf(ExchangeNode.class)) && children.isEmpty()) {
    throw new IllegalStateException("Subplan has remote exchanges but no child subplans");
  }
 else   if (!Iterables.any(fragment.getSources(),instanceOf(ExchangeNode.class)) && !children.isEmpty()) {
    throw new IllegalStateException("Subplan has no remote exchanges but has child subplans");
  }
  for (  SubPlan child : children) {
    child.sanityCheck();
  }
}
