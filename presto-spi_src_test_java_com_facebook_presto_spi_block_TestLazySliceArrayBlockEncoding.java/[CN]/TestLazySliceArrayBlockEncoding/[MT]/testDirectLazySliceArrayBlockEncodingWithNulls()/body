{
  Slice[] expectedValues=createExpectedValuesWithNulls(10,Ints.asList(0,3,9));
  TestDirectLazySliceArrayBlockLoader loader=new TestDirectLazySliceArrayBlockLoader(expectedValues);
  LazySliceArrayBlock lazySliceArrayBlock=new LazySliceArrayBlock(10,loader);
  lazySliceArrayBlock.assureLoaded();
  assertTrue(loader.loaded);
  BlockEncoding blockEncoding=new LazySliceArrayBlockEncoding();
  DynamicSliceOutput sliceOutput=new DynamicSliceOutput(1024);
  blockEncoding.writeBlock(sliceOutput,lazySliceArrayBlock);
  Block actualBlock=blockEncoding.readBlock(sliceOutput.slice().getInput());
  assertTrue(actualBlock instanceof SliceArrayBlock);
  SliceArrayBlock sliceArrayBlock=(SliceArrayBlock)actualBlock;
  assertEquals(sliceArrayBlock.getValues(),expectedValues);
}
