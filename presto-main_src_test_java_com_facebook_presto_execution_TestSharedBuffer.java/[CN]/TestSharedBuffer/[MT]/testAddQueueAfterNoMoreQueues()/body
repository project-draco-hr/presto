{
  SharedBuffer sharedBuffer=new SharedBuffer(sizeOfPages(10),new OutputBuffers(0,false));
  assertFalse(sharedBuffer.isFinished());
  sharedBuffer.setOutputBuffers(new OutputBuffers(1,true));
  assertFalse(sharedBuffer.isFinished());
  sharedBuffer.setOutputBuffers(new OutputBuffers(2,true));
  assertFalse(sharedBuffer.isFinished());
  sharedBuffer.setOutputBuffers(new OutputBuffers(3,true));
  assertFalse(sharedBuffer.isFinished());
  try {
    sharedBuffer.setOutputBuffers(new OutputBuffers(4,true,"foo"));
    fail("Expected IllegalStateException from addQueue after noMoreQueues has been called");
  }
 catch (  IllegalStateException expected) {
  }
}
