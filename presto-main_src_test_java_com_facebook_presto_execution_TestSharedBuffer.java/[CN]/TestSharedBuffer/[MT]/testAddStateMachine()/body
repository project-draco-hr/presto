{
  SharedBuffer sharedBuffer=new SharedBuffer(TASK_ID,stateNotificationExecutor,sizeOfPages(10));
  sharedBuffer.setNoMorePages();
  addPage(sharedBuffer,createPage(0));
  addPage(sharedBuffer,createPage(0));
  assertEquals(sharedBuffer.getInfo().getTotalPagesSent(),0);
  sharedBuffer=new SharedBuffer(TASK_ID,stateNotificationExecutor,sizeOfPages(10));
  sharedBuffer.destroy();
  addPage(sharedBuffer,createPage(0));
  addPage(sharedBuffer,createPage(0));
  assertEquals(sharedBuffer.getInfo().getTotalPagesSent(),0);
}
