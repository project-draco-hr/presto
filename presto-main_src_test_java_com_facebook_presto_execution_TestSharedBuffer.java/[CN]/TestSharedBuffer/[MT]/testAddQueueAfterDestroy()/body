{
  SharedBuffer<Integer> sharedBuffer=new SharedBuffer<>(10);
  assertFalse(sharedBuffer.isFinished());
  sharedBuffer.destroy();
  assertFinished(sharedBuffer);
  sharedBuffer.noMoreQueues();
  assertFinished(sharedBuffer);
  sharedBuffer.noMoreQueues();
  assertFinished(sharedBuffer);
  try {
    sharedBuffer.addQueue("foo");
    fail("Expected IllegalStateException from addQueue after noMoreQueues has been called");
  }
 catch (  IllegalStateException expected) {
  }
}
