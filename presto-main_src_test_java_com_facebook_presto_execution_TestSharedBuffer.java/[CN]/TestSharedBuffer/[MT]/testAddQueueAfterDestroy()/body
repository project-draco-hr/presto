{
  SharedBuffer sharedBuffer=new SharedBuffer(TASK_ID,executor,sizeOfPages(10),INITIAL_EMPTY_OUTPUT_BUFFERS);
  assertFalse(sharedBuffer.isFinished());
  sharedBuffer.destroy();
  assertFinished(sharedBuffer);
  sharedBuffer.setOutputBuffers(INITIAL_EMPTY_OUTPUT_BUFFERS.withNoMoreBufferIds());
  assertFinished(sharedBuffer);
  sharedBuffer.setOutputBuffers(INITIAL_EMPTY_OUTPUT_BUFFERS.withNoMoreBufferIds());
  assertFinished(sharedBuffer);
  sharedBuffer.setOutputBuffers(INITIAL_EMPTY_OUTPUT_BUFFERS.withBuffer("foo",new UnpartitionedPagePartitionFunction()).withNoMoreBufferIds());
}
