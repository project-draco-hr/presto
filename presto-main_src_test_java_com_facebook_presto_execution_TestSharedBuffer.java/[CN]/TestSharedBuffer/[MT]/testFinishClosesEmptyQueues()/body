{
  SharedBuffer sharedBuffer=new SharedBuffer(TASK_ID,stateNotificationExecutor,sizeOfPages(10));
  sharedBuffer.setOutputBuffers(INITIAL_EMPTY_OUTPUT_BUFFERS.withBuffer(FIRST,new UnpartitionedPagePartitionFunction()).withBuffer(SECOND,new UnpartitionedPagePartitionFunction()));
  sharedBuffer.setNoMorePages();
  assertQueueState(sharedBuffer,FIRST,0,0,0,0,0,0);
  assertQueueState(sharedBuffer,SECOND,0,0,0,0,0,0);
  sharedBuffer.abort(FIRST);
  sharedBuffer.abort(SECOND);
  assertQueueClosed(sharedBuffer,FIRST,0);
  assertQueueClosed(sharedBuffer,SECOND,0);
}
