{
  int rows=page.getPositionCount();
  BlockCursor[] cursors=new BlockCursor[page.getChannelCount()];
  for (int i=0; i < page.getChannelCount(); i++) {
    cursors[i]=page.getBlock(i).cursor();
  }
  for (int position=0; position < rows; position++) {
    for (    BlockCursor cursor : cursors) {
      checkState(cursor.advanceNextPosition());
    }
    if (filterFunction.filter(cursors)) {
      pageBuilder.declarePosition();
      for (int i=0; i < projections.size(); i++) {
        projections.get(i).project(cursors,pageBuilder.getBlockBuilder(i));
      }
    }
  }
  for (  BlockCursor cursor : cursors) {
    checkState(!cursor.advanceNextPosition());
  }
}
