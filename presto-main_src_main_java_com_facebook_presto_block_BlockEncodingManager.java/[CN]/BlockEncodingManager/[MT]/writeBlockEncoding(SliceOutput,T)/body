{
  String encodingName=encoding.getName();
  @SuppressWarnings("unchecked") BlockEncodingFactory<T> blockEncoding=(BlockEncodingFactory<T>)blockEncodings.get(encodingName);
  checkArgument(blockEncoding != null,"Unknown block encoding %s",encodingName);
  writeLengthPrefixedString(output,encodingName);
  blockEncoding.writeEncoding(this,output,encoding);
}
