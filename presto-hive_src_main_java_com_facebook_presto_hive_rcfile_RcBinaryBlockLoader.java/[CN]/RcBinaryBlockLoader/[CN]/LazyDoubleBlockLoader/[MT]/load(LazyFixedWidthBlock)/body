{
  if (loaded) {
    return;
  }
  try {
    BytesRefArrayWritable columnBatch=batch.getColumn(fieldId);
    int positionInBatch=batch.getPositionInBatch();
    int batchSize=block.getPositionCount();
    boolean[] isNull=new boolean[batchSize];
    double[] vector=new double[batchSize];
    for (int i=0; i < batchSize; i++) {
      BytesRefWritable writable=columnBatch.unCheckedGet(i + positionInBatch);
      int length=writable.getLength();
      if (length != 0) {
        checkState(length == SIZE_OF_LONG,"Double should be 8 bytes");
        byte[] bytes=writable.getData();
        int start=writable.getStart();
        long longBits=ByteArrays.getLong(bytes,start);
        vector[i]=Double.longBitsToDouble(Long.reverseBytes(longBits));
      }
 else {
        isNull[i]=true;
      }
    }
    block.setNullVector(isNull);
    block.setRawSlice(wrappedDoubleArray(vector));
    loaded=true;
  }
 catch (  IOException e) {
    throw Throwables.propagate(e);
  }
}
