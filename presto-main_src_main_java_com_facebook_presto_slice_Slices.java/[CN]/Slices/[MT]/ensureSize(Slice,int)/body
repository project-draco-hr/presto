{
  if (existingSlice == null) {
    return allocate(minWritableBytes);
  }
  if (minWritableBytes <= existingSlice.length()) {
    return existingSlice;
  }
  int newCapacity;
  if (existingSlice.length() == 0) {
    newCapacity=1;
  }
 else {
    newCapacity=existingSlice.length();
  }
  int minNewCapacity=existingSlice.length() + minWritableBytes;
  while (newCapacity < minNewCapacity) {
    if (newCapacity < SLICE_ALLOC_THRESHOLD) {
      newCapacity<<=1;
    }
 else {
      newCapacity*=SLICE_ALLOW_SKEW;
    }
  }
  Slice newSlice=Slices.allocate(newCapacity);
  newSlice.setBytes(0,existingSlice,0,existingSlice.length());
  return newSlice;
}
