{
  int blockIndex=slices.size();
  slices.add(blockIndex,block.getSlice());
  BlockCursor cursor=block.cursor();
  for (int position=0; position < block.getPositionCount(); position++) {
    checkState(cursor.advanceNextPosition());
    int offset=cursor.getRawOffset();
    long sliceAddress=(((long)blockIndex) << 32) | offset;
    Preconditions.checkState((int)(sliceAddress >> 32) == blockIndex);
    Preconditions.checkState((int)sliceAddress == offset);
    offsets.add(sliceAddress);
  }
}
