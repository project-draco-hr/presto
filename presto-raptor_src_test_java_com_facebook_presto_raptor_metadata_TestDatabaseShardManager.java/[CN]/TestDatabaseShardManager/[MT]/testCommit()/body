{
  long tableId=1;
  List<ShardNode> shards=ImmutableList.<ShardNode>builder().add(new ShardNode(UUID.randomUUID(),"node1")).add(new ShardNode(UUID.randomUUID(),"node1")).add(new ShardNode(UUID.randomUUID(),"node2")).build();
  shardManager.commitTable(tableId,shards,Optional.<String>absent());
  Set<ShardNodes> actual=ImmutableSet.copyOf(shardManager.getShardNodes(tableId));
  Set<ShardNodes> expected=new HashSet<>();
  for (  ShardNode shard : shards) {
    expected.add(new ShardNodes(shard.getShardUuid(),ImmutableSet.of(shard.getNodeIdentifier())));
  }
  assertEquals(actual,expected);
}
