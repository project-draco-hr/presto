{
  OptionalLong left=visit(ctx.left);
  OptionalLong right=visit(ctx.right);
  if (!left.isPresent() || !right.isPresent()) {
    return OptionalLong.empty();
  }
switch (ctx.binaryFunctionName().name.getType()) {
case MIN:
    return OptionalLong.of(Math.min(left.getAsLong(),right.getAsLong()));
case MAX:
  return OptionalLong.of(Math.max(left.getAsLong(),right.getAsLong()));
default :
throw new IllegalArgumentException("Unsupported binary function " + ctx.binaryFunctionName().getText());
}
}
