{
  checkState(!stopped.get(),"ConnectorManager is stopped");
  TransactionalConnectorFactory existingConnectorFactory=connectorFactories.putIfAbsent(connectorFactory.getName(),connectorFactory);
  checkArgument(existingConnectorFactory == null,"Connector %s is already registered",connectorFactory.getName());
}
