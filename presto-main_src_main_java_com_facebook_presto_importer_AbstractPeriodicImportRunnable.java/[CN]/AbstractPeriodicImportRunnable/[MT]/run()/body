{
  long jobId=jobState.getJob().getJobId();
  long runId=periodicImportManager.beginRun(jobId);
  boolean success=false;
  try {
    long startTime=System.currentTimeMillis();
    log.debug("Job %d: Scheduled for execution!",jobId);
    long lastRun=jobState.getLastRun();
    if (lastRun > 0 && startTime - lastRun < jobState.getJob().getInterval() * 900) {
      log.debug("Job %d: Last run %dms ago; less than %dms, skipping",jobId,startTime - lastRun,jobState.getJob().getInterval() * 1000);
      return;
    }
 else {
      jobState.setLastRun(startTime);
      doRun();
      log.debug("Job %d: Done!",jobId);
      success=true;
    }
  }
 catch (  InterruptedException ie) {
    Thread.currentThread().interrupt();
  }
catch (  Exception e) {
    log.warn(e,"Job %d: ",jobId);
  }
 finally {
    if (!Thread.currentThread().isInterrupted()) {
      periodicImportManager.endRun(runId,success);
    }
  }
}
