{
  long count=state.getCount();
  if (population) {
    if (count == 0) {
      out.appendNull();
    }
 else {
      double m2=state.getM2();
      double result=m2 / count;
      if (standardDeviation) {
        result=Math.sqrt(result);
      }
      out.appendDouble(result);
    }
  }
 else {
    if (count < 2) {
      out.appendNull();
    }
 else {
      double m2=state.getM2();
      double result=m2 / (count - 1);
      if (standardDeviation) {
        result=Math.sqrt(result);
      }
      out.appendDouble(result);
    }
  }
}
