{
  checkState(!closed,"already closed");
  if (exception) {
    throw new RuntimeTTransportException("failed",null);
  }
  if (fail) {
    return ResultCode.TRY_LATER;
  }
  logRecorder.record(messages);
  return ResultCode.OK;
}
