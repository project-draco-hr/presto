{
  AsyncScribeLogger asyncScribeLogger=new AsyncScribeLogger(10,provider,DataSize.valueOf("1MB"));
  AsyncScribeLogger.FlushTask flushTask=asyncScribeLogger.createFlushTask();
  asyncScribeLogger.log(createLogEntry("cat","msg"));
  assertTrue(logRecorder.getLoggedMessages().isEmpty());
  assertEquals(logRecorder.getLogCallCount(),0);
  flushTask.process();
  assertEquals(logRecorder.getLoggedMessages().size(),1);
  assertEquals(logRecorder.getLogCallCount(),1);
  asyncScribeLogger.log(createLogEntry("cat","msg"));
  asyncScribeLogger.log(createLogEntry("cat","msg"));
  assertEquals(logRecorder.getLoggedMessages().size(),1);
  assertEquals(logRecorder.getLogCallCount(),1);
  flushTask.process();
  assertEquals(logRecorder.getLoggedMessages().size(),3);
  assertEquals(logRecorder.getLogCallCount(),2);
}
