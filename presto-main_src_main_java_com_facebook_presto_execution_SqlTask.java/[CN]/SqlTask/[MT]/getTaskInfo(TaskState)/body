{
  checkNotNull(callersCurrentState,"callersCurrentState is null");
  lastHeartbeat.set(DateTime.now());
  if (callersCurrentState.isDone()) {
    return Futures.immediateFuture(getTaskInfo());
  }
  ListenableFuture<TaskState> futureTaskState=taskStateMachine.getStateChange(callersCurrentState);
  return Futures.transform(futureTaskState,new Function<TaskState,TaskInfo>(){
    @Nullable @Override public TaskInfo apply(    @Nullable TaskState state){
      return getTaskInfo();
    }
  }
);
}
