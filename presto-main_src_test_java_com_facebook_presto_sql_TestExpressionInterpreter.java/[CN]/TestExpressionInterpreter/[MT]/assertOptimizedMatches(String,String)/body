{
  Object actualOptimized=optimize(actual);
  if (actualOptimized instanceof Expression) {
    actualOptimized=ExpressionTreeRewriter.rewriteWith(new FailedFunctionRewriter(),(Expression)actualOptimized);
  }
  assertEquals(actualOptimized,SQL_PARSER.createExpression(expected));
}
