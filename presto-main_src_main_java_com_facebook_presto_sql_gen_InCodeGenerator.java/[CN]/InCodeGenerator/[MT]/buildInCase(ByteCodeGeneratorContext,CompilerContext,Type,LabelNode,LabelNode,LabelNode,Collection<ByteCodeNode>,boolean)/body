{
  Variable caseWasNull=null;
  if (checkForNulls) {
    caseWasNull=context.createTempVariable(boolean.class);
  }
  Block caseBlock=new Block(context).visitLabel(caseLabel);
  if (checkForNulls) {
    caseBlock.putVariable(caseWasNull,false);
  }
  LabelNode elseLabel=new LabelNode("else");
  Block elseBlock=new Block(context).visitLabel(elseLabel);
  if (checkForNulls) {
    elseBlock.getVariable(caseWasNull).putVariable("wasNull");
  }
  elseBlock.gotoLabel(noMatchLabel);
  FunctionInfo operator=generatorContext.getRegistry().resolveOperator(OperatorType.EQUAL,ImmutableList.of(type,type));
  Binding equalsFunction=generatorContext.getCallSiteBinder().bind(operator.getMethodHandle());
  ByteCodeNode elseNode=elseBlock;
  for (  ByteCodeNode testNode : testValues) {
    LabelNode testLabel=new LabelNode("test");
    IfStatement.IfStatementBuilder test=ifStatementBuilder(context);
    Block condition=new Block(context).visitLabel(testLabel).dup(type.getJavaType()).append(testNode);
    if (checkForNulls) {
      condition.getVariable("wasNull").putVariable(caseWasNull).append(ifWasNullPopAndGoto(context,elseLabel,void.class,type.getJavaType(),type.getJavaType()));
    }
    condition.append(invoke(generatorContext.getContext(),equalsFunction,operator.getSignature()));
    test.condition(condition);
    test.ifTrue(new Block(context).gotoLabel(matchLabel));
    test.ifFalse(elseNode);
    elseNode=test.build();
    elseLabel=testLabel;
  }
  caseBlock.append(elseNode);
  return caseBlock;
}
