{
  Variable caseWasNull=null;
  if (checkForNulls) {
    caseWasNull=context.createTempVariable(boolean.class);
  }
  Block caseBlock=new Block(context).visitLabel(caseLabel);
  if (checkForNulls) {
    caseBlock.putVariable(caseWasNull.getLocalVariableDefinition(),false);
  }
  LabelNode elseLabel=new LabelNode("else");
  Block elseBlock=new Block(context).visitLabel(elseLabel);
  if (checkForNulls) {
    elseBlock.getVariable(caseWasNull.getLocalVariableDefinition()).putVariable("wasNull");
  }
  elseBlock.gotoLabel(noMatchLabel);
  FunctionInfo operator=generatorContext.getRegistry().resolveOperator(OperatorType.EQUAL,ImmutableList.of(type,type));
  FunctionBinding equalsFunction=generatorContext.getBootstrapBinder().bindFunction(operator,generatorContext.generateGetSession(),ImmutableList.of(NOP,NOP));
  ByteCodeNode elseNode=elseBlock;
  for (  ByteCodeNode testNode : testValues) {
    LabelNode testLabel=new LabelNode("test");
    IfStatement.IfStatementBuilder test=ifStatementBuilder(context);
    Block condition=new Block(context).visitLabel(testLabel).dup(type.getJavaType()).append(testNode);
    if (checkForNulls) {
      condition.getVariable("wasNull").putVariable(caseWasNull.getLocalVariableDefinition()).append(ifWasNullPopAndGoto(context,elseLabel,void.class,type.getJavaType(),type.getJavaType()));
    }
    condition.invokeDynamic(equalsFunction.getName(),equalsFunction.getCallSite().type(),equalsFunction.getBindingId());
    test.condition(condition);
    test.ifTrue(new Block(context).gotoLabel(matchLabel));
    test.ifFalse(elseNode);
    elseNode=test.build();
    elseLabel=testLabel;
  }
  caseBlock.append(elseNode);
  return caseBlock;
}
