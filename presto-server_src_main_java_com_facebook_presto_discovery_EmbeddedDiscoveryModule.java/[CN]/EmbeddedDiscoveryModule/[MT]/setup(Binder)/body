{
  if (!buildConfigObject(EmbeddedDiscoveryConfig.class).isEnabled()) {
    return;
  }
  bindConfig(binder).to(DiscoveryConfig.class);
  binder.bind(ServiceResource.class).in(Scopes.SINGLETON);
  discoveryBinder(binder).bindHttpAnnouncement("discovery");
  jsonCodecBinder(binder).bindJsonCodec(Service.class);
  jsonCodecBinder(binder).bindListJsonCodec(Service.class);
  binder.bind(ServiceSelector.class).to(DiscoveryServiceSelector.class);
  binder.bind(StaticStore.class).to(EmptyStaticStore.class);
  binder.bind(DynamicAnnouncementResource.class).in(Scopes.SINGLETON);
  binder.bind(DynamicStore.class).to(ReplicatedDynamicStore.class).in(Scopes.SINGLETON);
  binder.install(new ReplicatedStoreModule("dynamic",ForDynamicStore.class,InMemoryStore.class));
}
