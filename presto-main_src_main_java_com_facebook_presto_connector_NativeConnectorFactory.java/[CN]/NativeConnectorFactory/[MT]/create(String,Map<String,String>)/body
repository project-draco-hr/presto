{
  NativeMetadata nativeMetadata;
  try {
    nativeMetadata=new NativeMetadata(connectorId,dbi);
  }
 catch (  InterruptedException e) {
    Thread.currentThread().interrupt();
    throw Throwables.propagate(e);
  }
  ImmutableClassToInstanceMap.Builder<Object> builder=ImmutableClassToInstanceMap.builder();
  builder.put(ConnectorMetadata.class,nativeMetadata);
  builder.put(ConnectorSplitManager.class,splitManager);
  builder.put(ConnectorDataStreamProvider.class,dataStreamProvider);
  builder.put(ConnectorHandleResolver.class,HANDLE_RESOLVER);
  return new StaticConnector(builder.build());
}
