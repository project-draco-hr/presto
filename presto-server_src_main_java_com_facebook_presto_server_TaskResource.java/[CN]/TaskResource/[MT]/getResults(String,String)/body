{
  checkNotNull(taskId,"taskId is null");
  checkNotNull(outputId,"outputId is null");
  try {
    List<Page> pages=taskManager.getTaskResults(taskId,outputId,DEFAULT_MAX_PAGE_COUNT,DEFAULT_MAX_WAIT_TIME);
    if (pages.isEmpty()) {
      if (isDone(taskId)) {
        return Response.status(Status.GONE).build();
      }
 else {
        return Response.status(Status.NO_CONTENT).build();
      }
    }
    GenericEntity<?> entity=new GenericEntity<>(pages,new TypeToken<List<Page>>(){
    }
.getType());
    return Response.ok(entity).build();
  }
 catch (  NoSuchBufferException e) {
    return Response.status(Status.NO_CONTENT).build();
  }
catch (  NoSuchElementException e) {
    if (isDone(taskId)) {
      return Response.status(Status.GONE).build();
    }
 else {
      return Response.status(Status.NO_CONTENT).build();
    }
  }
}
