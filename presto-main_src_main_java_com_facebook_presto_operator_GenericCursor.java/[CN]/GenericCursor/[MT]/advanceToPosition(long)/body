{
  Preconditions.checkArgument(!hasAdvanced || newPosition >= getPosition(),"Can't advance backwards");
  if (blockCursor == null) {
    return FINISHED;
  }
  if (hasAdvanced && newPosition == getPosition()) {
    return SUCCESS;
  }
  hasAdvanced=true;
  while (newPosition > blockCursor.getRange().getEnd() && iterator.canAdvance()) {
    blockCursor=iterator.next().cursor(session);
  }
  if (iterator.mustYield()) {
    return MUST_YIELD;
  }
  if (newPosition > blockCursor.getRange().getEnd()) {
    blockCursor=null;
    return FINISHED;
  }
  return blockCursor.advanceToPosition(newPosition);
}
