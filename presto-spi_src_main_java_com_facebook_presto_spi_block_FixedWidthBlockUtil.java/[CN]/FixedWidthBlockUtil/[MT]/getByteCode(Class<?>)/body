{
  InputStream stream=clazz.getClassLoader().getResourceAsStream(clazz.getName().replace('.','/') + ".class");
  if (stream == null) {
    throw new IllegalArgumentException(String.valueOf("Could not obtain byte code for class " + clazz.getName()));
  }
  try {
    ByteArrayOutputStream out=new ByteArrayOutputStream();
    byte[] buffer=new byte[4096];
    for (int bytes=stream.read(buffer); bytes > 0; bytes=stream.read(buffer)) {
      out.write(buffer,0,bytes);
    }
    return out.toByteArray();
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
