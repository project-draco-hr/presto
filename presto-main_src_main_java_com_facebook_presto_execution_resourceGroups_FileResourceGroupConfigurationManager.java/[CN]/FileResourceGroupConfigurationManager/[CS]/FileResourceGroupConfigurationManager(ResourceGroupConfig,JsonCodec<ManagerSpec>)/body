{
  requireNonNull(config,"config is null");
  requireNonNull(codec,"codec is null");
  ManagerSpec managerSpec;
  try {
    managerSpec=codec.fromJson(Files.readAllBytes(Paths.get(config.getConfigFile())));
  }
 catch (  IOException e) {
    throw Throwables.propagate(e);
  }
  this.rootGroups=managerSpec.getRootGroups();
  ImmutableList.Builder<ResourceGroupSelector> selectors=ImmutableList.builder();
  for (  SelectorSpec spec : managerSpec.getSelectors()) {
    selectors.add(new StaticSelector(spec.getUserRegex(),spec.getSourceRegex(),spec.getSessionPropertyRegexes(),spec.getGroup()));
  }
  this.selectors=selectors.build();
}
