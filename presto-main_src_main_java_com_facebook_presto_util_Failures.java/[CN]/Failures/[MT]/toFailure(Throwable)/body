{
  if (failure == null) {
    return null;
  }
  String type;
  if (failure instanceof Failure) {
    type=((Failure)failure).getType();
  }
 else {
    type=failure.getClass().getCanonicalName();
  }
  return new FailureInfo(type,failure.getMessage(),toFailure(failure.getCause()),toFailures(asList(failure.getSuppressed())),Lists.transform(asList(failure.getStackTrace()),toStringFunction()),getErrorLocation(failure));
}
