{
  ExecutorService executor=newCachedThreadPool(daemonThreadsNamed("test"));
  try {
    for (    AbstractBenchmark benchmark : BenchmarkSuite.createBenchmarks(executor)) {
      try {
        benchmark.runOnce();
      }
 catch (      RuntimeException e) {
        throw new AssertionError("Error running " + benchmark.getBenchmarkName(),e);
      }
    }
  }
  finally {
    executor.shutdownNow();
  }
}
