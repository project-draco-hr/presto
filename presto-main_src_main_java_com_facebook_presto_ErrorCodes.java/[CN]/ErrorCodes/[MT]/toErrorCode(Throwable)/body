{
  if (throwable == null) {
    return null;
  }
  if (throwable instanceof PrestoException) {
    return ((PrestoException)throwable).getErrorCode();
  }
  if (throwable instanceof ParsingException || throwable instanceof SemanticException) {
    return StandardErrorCode.SYNTAX_ERROR;
  }
  if (throwable.getCause() != null) {
    return toErrorCode(throwable.getCause());
  }
  return StandardErrorCode.INTERNAL;
}
