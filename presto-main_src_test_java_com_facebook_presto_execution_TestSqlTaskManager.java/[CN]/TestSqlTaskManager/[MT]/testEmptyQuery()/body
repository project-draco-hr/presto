{
  TaskInfo taskInfo=sqlTaskManager.updateTask(session,taskId,testFragment,ImmutableList.<TaskSource>of(),new OutputBuffers(0,false,ImmutableSet.<String>of()));
  assertEquals(taskInfo.getState(),TaskState.RUNNING);
  taskInfo=sqlTaskManager.getTaskInfo(taskInfo.getTaskId(),false);
  assertEquals(taskInfo.getState(),TaskState.RUNNING);
  taskInfo=sqlTaskManager.updateTask(session,taskId,testFragment,ImmutableList.<TaskSource>of(new TaskSource(tableScanNodeId,ImmutableSet.<ScheduledSplit>of(),true)),new OutputBuffers(1,true,ImmutableSet.<String>of()));
  assertEquals(taskInfo.getState(),TaskState.FINISHED);
  taskInfo=sqlTaskManager.getTaskInfo(taskInfo.getTaskId(),false);
  assertEquals(taskInfo.getState(),TaskState.FINISHED);
}
