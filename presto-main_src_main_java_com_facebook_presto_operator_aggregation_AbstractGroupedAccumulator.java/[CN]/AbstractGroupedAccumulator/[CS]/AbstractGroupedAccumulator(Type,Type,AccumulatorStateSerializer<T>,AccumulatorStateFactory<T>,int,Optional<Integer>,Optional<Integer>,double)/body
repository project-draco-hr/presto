{
  this.finalType=checkNotNull(finalType,"finalType is null");
  this.intermediateType=checkNotNull(intermediateType,"intermediateType is null");
  this.stateSerializer=checkNotNull(stateSerializer,"stateSerializer is null");
  this.stateFactory=checkNotNull(stateFactory,"stateFactory is null");
  this.valueChannel=valueChannel;
  this.maskChannel=maskChannel;
  this.sampleWeightChannel=sampleWeightChannel;
  this.state=stateFactory.createGroupedState();
  checkArgument(state instanceof GroupedAccumulatorState,"state is not a GroupedAccumulatorState");
  groupedState=(GroupedAccumulatorState)state;
  this.confidence=confidence;
}
