{
  if (stateClass.equals(NullableDoubleState.class)) {
    NullableDoubleState defaultState=new SingleNullableDoubleState();
    initializeState(stateClass.cast(defaultState));
    return stateClass.cast(new GroupedNullableDoubleState(defaultState));
  }
  if (stateClass.equals(NullableLongState.class)) {
    NullableLongState defaultState=new SingleNullableLongState();
    initializeState(stateClass.cast(defaultState));
    return stateClass.cast(new GroupedNullableLongState(defaultState));
  }
  if (stateClass.equals(LongAndDoubleState.class)) {
    LongAndDoubleState defaultState=new SingleLongAndDoubleState();
    initializeState(stateClass.cast(defaultState));
    return stateClass.cast(new GroupedLongAndDoubleState(defaultState));
  }
  throw new IllegalStateException(String.format("Unsupported state type %s",stateClass));
}
