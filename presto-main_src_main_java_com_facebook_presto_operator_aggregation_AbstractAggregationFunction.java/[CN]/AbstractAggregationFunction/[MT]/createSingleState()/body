{
  if (stateClass.equals(NullableDoubleState.class)) {
    T state=stateClass.cast(new SingleNullableDoubleState());
    initializeState(state);
    return state;
  }
  if (stateClass.equals(NullableLongState.class)) {
    T state=stateClass.cast(new SingleNullableLongState());
    initializeState(state);
    return state;
  }
  if (stateClass.equals(LongAndDoubleState.class)) {
    T state=stateClass.cast(new SingleLongAndDoubleState());
    initializeState(state);
    return state;
  }
  throw new IllegalStateException(String.format("Unsupported state type %s",stateClass));
}
