{
  this.finalType=checkNotNull(finalType,"final type is null");
  this.intermediateType=checkNotNull(intermediateType,"intermediate type is null");
  this.parameterTypes=ImmutableList.of(checkNotNull(parameterType,"parameter type is null"));
  java.lang.reflect.Type[] types=TypeParameterUtils.getTypeParameters(AbstractAggregationFunction.class,getClass());
  checkState(types.length == 1 && types[0] instanceof Class);
  stateFactory=new StateCompiler().generateStateFactory((Class<T>)types[0]);
  stateSerializer=new StateCompiler().generateStateSerializer((Class<T>)types[0]);
  this.approximationSupported=approximationSupported;
}
