{
  this.port=port;
  zkDataDir=Files.createTempDir();
  zkServer=new ZooKeeperServer();
  FileTxnSnapLog ftxn=new FileTxnSnapLog(zkDataDir,zkDataDir);
  zkServer.setTxnLogFactory(ftxn);
  cnxnFactory=new NIOServerCnxn.Factory(new InetSocketAddress(this.port),0);
}
