{
  checkIndexLength(index,length);
  if (buffer.hasArray()) {
    out.write(buffer.array(),buffer.arrayOffset() + index,length);
  }
 else {
    byte[] bytes=new byte[4096];
    ByteBuffer src=toByteBuffer(index,length);
    while (src.remaining() > 0) {
      int count=min(src.remaining(),bytes.length);
      src.get(bytes,0,count);
      out.write(bytes,0,count);
    }
  }
}
