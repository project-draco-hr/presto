{
  ClassDefinition definition=new ClassDefinition(new CompilerContext(null),a(PUBLIC,FINAL),typeFromPathName(name + accumulatorClass.getSimpleName() + "_"+ CLASS_ID.incrementAndGet()),type(accumulatorClass));
  generateMatchingConstructors(definition,accumulatorClass);
  generateProcessInput(definition,inputFunction,stateClass);
  generateProcessIntermediate(definition,accumulatorClass,intermediateInputFunction,combineFunction,stateClass);
  generateEvaluateFinal(definition,accumulatorClass,outputFunction,stateClass);
  return defineClass(definition,accumulatorClass,classLoader);
}
