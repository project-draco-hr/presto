{
  MethodDefinition method=definition.declareMethod(a(PUBLIC),"evaluateIntermediate",type(void.class),arg("groupId",int.class),arg("out",BlockBuilder.class));
  CompilerContext context=method.getCompilerContext();
  Variable thisVariable=context.getVariable("this");
  Variable groupId=context.getVariable("groupId");
  Variable out=context.getVariable("out");
  ByteCodeExpression state=thisVariable.getField(stateField);
  ByteCodeExpression stateSerializer=thisVariable.getField(stateSerializerField);
  method.getBody().append(state.invoke("setGroupId",void.class,groupId.cast(long.class))).append(stateSerializer.invoke("serialize",void.class,state.cast(Object.class),out)).ret();
}
