{
  if (charset == null) {
    throw new NullPointerException("charset");
  }
  Map<Charset,CharsetDecoder> map=decoders.get();
  CharsetDecoder d=map.get(charset);
  if (d != null) {
    d.reset();
    d.onMalformedInput(CodingErrorAction.REPLACE);
    d.onUnmappableCharacter(CodingErrorAction.REPLACE);
    return d;
  }
  d=charset.newDecoder();
  d.onMalformedInput(CodingErrorAction.REPLACE);
  d.onUnmappableCharacter(CodingErrorAction.REPLACE);
  map.put(charset,d);
  return d;
}
