{
  while (currentPositionIndex < validPositions.size() && validPositions.get(currentPositionIndex) < position) {
    currentPositionIndex++;
  }
  if (currentPositionIndex == validPositions.size()) {
    nextValueIndex=-1;
    throw new NoSuchElementException();
  }
  position=validPositions.get(currentPositionIndex);
  valueCursor.advanceToPosition(position);
  Preconditions.checkState(valueCursor.getPosition() == position,"Advanced to unexpected position");
  if (currentPositionIndex >= nextValueIndex) {
    findNextValuePosition();
  }
}
