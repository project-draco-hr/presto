{
  for (  ServiceSelector selector : serviceSelectors) {
    if (selector instanceof CachingServiceSelector) {
      try {
        Method refresh=selector.getClass().getDeclaredMethod("refresh");
        refresh.setAccessible(true);
        Future<?> future=(Future<?>)refresh.invoke(selector);
        future.get();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
  long start=System.nanoTime();
  while (!nodeManager.getCurrentNode().isPresent() && Duration.nanosSince(start).convertTo(TimeUnit.SECONDS) < 1) {
    nodeManager.refreshNodes(true);
  }
  assertTrue(nodeManager.getCurrentNode().isPresent(),"Current node is not in active set");
}
