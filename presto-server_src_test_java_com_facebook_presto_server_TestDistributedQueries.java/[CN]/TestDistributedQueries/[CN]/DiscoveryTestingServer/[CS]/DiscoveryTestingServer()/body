{
  tempDir=Files.createTempDir();
  Map<String,String> serverProperties=ImmutableMap.<String,String>builder().put("node.environment","testing").put("static.db.location",tempDir.getAbsolutePath()).build();
  Bootstrap app=new Bootstrap(new MBeanModule(),new NodeModule(),new TestingHttpServerModule(),new JsonModule(),new JaxrsModule(),new DiscoveryServerModule(),new DiscoveryModule(),new Module(){
    @Override public void configure(    Binder binder){
      binder.bind(MBeanServer.class).toInstance(new TestingMBeanServer());
    }
  }
);
  Injector injector=app.strictConfig().doNotInitializeLogging().setRequiredConfigurationProperties(serverProperties).initialize();
  lifeCycleManager=injector.getInstance(LifeCycleManager.class);
  server=injector.getInstance(TestingHttpServer.class);
}
