{
  ImmutableSetMultimap.Builder<UUID,String> builder=ImmutableSetMultimap.builder();
  for (  ShardNode shardNode : dao.getShardNodes(tableId)) {
    builder.put(shardNode.getShardUuid(),shardNode.getNodeIdentifier());
  }
  SetMultimap<UUID,String> map=builder.build();
  ImmutableList.Builder<ShardNodes> list=ImmutableList.builder();
  for (  UUID shard : dao.getShards(tableId)) {
    Set<String> nodes=Optional.of(map.get(shard)).orElse(ImmutableSet.<String>of());
    list.add(new ShardNodes(shard,nodes));
  }
  return list.build();
}
