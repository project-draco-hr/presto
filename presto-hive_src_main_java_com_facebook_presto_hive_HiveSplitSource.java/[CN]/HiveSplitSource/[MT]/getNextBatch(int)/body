{
  checkState(!closed,"Provider is already closed");
  List<ConnectorSplit> splits=getFutureValue(queue.getBatchAsync(maxSize));
  if (throwable.get() != null) {
    throw propagatePrestoException(throwable.get());
  }
  if (outstandingSplitCount.addAndGet(-splits.size()) < maxOutstandingSplits) {
    splitLoader.resume();
  }
  return splits;
}
