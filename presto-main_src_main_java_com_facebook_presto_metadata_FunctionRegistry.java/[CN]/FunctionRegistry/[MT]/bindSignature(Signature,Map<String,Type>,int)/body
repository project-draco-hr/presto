{
  checkArgument((signature.isVariableArity() && arity >= signature.getArgumentTypes().size() - 1) || arity == signature.getArgumentTypes().size(),"Illegal arity %d for function %s",arity,signature);
  List<TypeSignature> argumentTypes=signature.getArgumentTypes();
  ImmutableList.Builder<TypeSignature> boundArguments=ImmutableList.builder();
  for (int i=0; i < argumentTypes.size() - 1; i++) {
    boundArguments.add(argumentTypes.get(i).bindParameters(boundTypeVariables));
  }
  if (!argumentTypes.isEmpty()) {
    TypeSignature lastArgument=argumentTypes.get(argumentTypes.size() - 1).bindParameters(boundTypeVariables);
    if (signature.isVariableArity()) {
      for (int i=0; i < arity - (argumentTypes.size() - 1); i++) {
        boundArguments.add(lastArgument);
      }
    }
 else {
      boundArguments.add(lastArgument);
    }
  }
  return new Signature(signature.getName(),signature.getKind(),ImmutableList.of(),signature.getLongVariableConstraints(),signature.getReturnType().bindParameters(boundTypeVariables),boundArguments.build(),false);
}
