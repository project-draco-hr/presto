{
  long newReservation=memoryReservation.getAndAdd(bytes);
  if (newReservation > maxMemoryReservation) {
    memoryReservation.getAndAdd(-bytes);
    return false;
  }
  boolean result=driverContext.reserveMemory(bytes);
  if (!result) {
    memoryReservation.getAndAdd(-bytes);
  }
  return result;
}
