{
  if (finishing || !buffer.isEmpty()) {
    return NOT_BLOCKED;
  }
  if (readerFuture == null) {
    readerFuture=SettableFuture.create();
  }
  return readerFuture;
}
