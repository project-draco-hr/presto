{
  this.storageService=checkNotNull(storageService,"storageService is null");
  this.backupStore=checkNotNull(backupStore,"backupStore is null");
  this.nodeIdentifier=checkNotNull(nodeManager,"nodeManager is null").getCurrentNode().getNodeIdentifier();
  this.shardManager=checkNotNull(shardManager,"shardManager is null");
  this.missingShardDiscoveryInterval=checkNotNull(missingShardDiscoveryInterval,"missingShardDiscoveryInterval is null");
  this.shardQueue=new MissingShardsQueue(new PrioritizedFifoExecutor<>(executorService,recoveryThreads,new MissingShardComparator()));
  this.stats=new ShardRecoveryStats();
}
