{
  DateTimeZone defaultTimeZone=DateTimeZone.getDefault();
  DateTimeZone localTimeZone=DateTimeZone.forOffsetHours(-8);
  DateTimeZone.setDefault(localTimeZone);
  try {
    assertFunction("date_parse('2013', '%Y')",getSeconds(new DateTime(2013,1,1,0,0,0,0,localTimeZone)));
    assertFunction("date_parse('2013-05', '%Y-%m')",getSeconds(new DateTime(2013,5,1,0,0,0,0,localTimeZone)));
    assertFunction("date_parse('2013-05-17', '%Y-%m-%d')",getSeconds(new DateTime(2013,5,17,0,0,0,0,localTimeZone)));
    assertFunction("date_parse('2013-05-17 12:35:10', '%Y-%m-%d %h:%i:%s')",getSeconds(new DateTime(2013,5,17,0,35,10,0,localTimeZone)));
    assertFunction("date_parse('2013-05-17 12:35:10 PM', '%Y-%m-%d %h:%i:%s %p')",getSeconds(new DateTime(2013,5,17,12,35,10,0,localTimeZone)));
    assertFunction("date_parse('2013-05-17 12:35:10 AM', '%Y-%m-%d %h:%i:%s %p')",getSeconds(new DateTime(2013,5,17,0,35,10,0,localTimeZone)));
    assertFunction("date_parse('2013-05-17 00:35:10', '%Y-%m-%d %H:%i:%s')",getSeconds(new DateTime(2013,5,17,0,35,10,0,localTimeZone)));
    assertFunction("date_parse('2013-05-17 23:35:10', '%Y-%m-%d %H:%i:%s')",getSeconds(new DateTime(2013,5,17,23,35,10,0,localTimeZone)));
    assertFunction("date_parse('abc 2013-05-17 fff 23:35:10 xyz', 'abc %Y-%m-%d fff %H:%i:%s xyz')",getSeconds(new DateTime(2013,5,17,23,35,10,0,localTimeZone)));
    assertFunction("date_parse('2013 14', '%Y %y')",getSeconds(new DateTime(2014,1,1,0,0,0,0,localTimeZone)));
  }
  finally {
    DateTimeZone.setDefault(defaultTimeZone);
  }
}
