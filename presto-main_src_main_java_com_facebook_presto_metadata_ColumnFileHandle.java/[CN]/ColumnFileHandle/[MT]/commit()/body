{
  Throwable firstThrowable=null;
  checkState(!committed.getAndSet(true),"already committed!");
  for (  BlocksFileWriter writer : writers.values()) {
    try {
      writer.close();
    }
 catch (    Throwable t) {
      if (firstThrowable == null) {
        firstThrowable=t;
      }
    }
  }
  Throwables.propagateIfInstanceOf(firstThrowable,IOException.class);
}
