{
  checkArgument(!indexChannels.isEmpty(),"indexChannels must not be empty");
  this.indexChannels=ImmutableList.copyOf(checkNotNull(indexChannels,"indexChannels is null"));
  this.outputTypes=ImmutableList.copyOf(checkNotNull(types,"types is null"));
  this.indexBuildDriverFactoryProvider=checkNotNull(indexBuildDriverFactoryProvider,"indexBuildDriverFactoryProvider is null");
  this.expectedPositions=checkNotNull(expectedPositions,"expectedPositions is null");
  this.maxIndexMemorySize=checkNotNull(maxIndexMemorySize,"maxIndexMemorySize is null");
  this.stats=checkNotNull(stats,"stats is null");
  ImmutableList.Builder<Type> typeBuilder=ImmutableList.builder();
  for (  int outputIndexChannel : indexChannels) {
    typeBuilder.add(types.get(outputIndexChannel));
  }
  this.indexTypes=typeBuilder.build();
  indexSnapshotReference=new AtomicReference<>(new IndexSnapshot(new EmptyLookupSource(types.size()),new EmptyLookupSource(indexChannels.size())));
}
