{
  Preconditions.checkNotNull(nameHint,"name is null");
  nameHint=nameHint.toLowerCase(ENGLISH);
  int index=nameHint.lastIndexOf("_");
  if (index > 0) {
    String tail=nameHint.substring(index + 1);
    if (Ints.tryParse(tail) != null || index == nameHint.length() - 1) {
      nameHint=nameHint.substring(0,index);
    }
  }
  String unique=nameHint;
  if (suffix != null) {
    unique=unique + "$" + suffix;
  }
  int id=1;
  while (symbols.containsKey(new Symbol(unique))) {
    unique=nameHint + "_" + id;
    id++;
  }
  Symbol symbol=new Symbol(unique);
  symbols.put(symbol,type);
  return symbol;
}
