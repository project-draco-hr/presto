{
  InnerStruct innerStruct=new InnerStruct(13,14L);
  Slice actual=toBinarySlice(innerStruct,getInspector(InnerStruct.class));
  Slice expected=rowSliceOf(ImmutableList.of(BIGINT,BIGINT),13,14L);
  assertEquals(actual,expected);
  OuterStruct outerStruct=new OuterStruct();
  outerStruct.byteVal=1;
  outerStruct.shortVal=2;
  outerStruct.intVal=3;
  outerStruct.longVal=4L;
  outerStruct.floatVal=5.01f;
  outerStruct.doubleVal=6.001d;
  outerStruct.stringVal="seven";
  outerStruct.byteArray=new byte[]{'2'};
  InnerStruct is1=new InnerStruct(2,-5L);
  InnerStruct is2=new InnerStruct(-10,0L);
  outerStruct.structArray=new ArrayList<>(2);
  outerStruct.structArray.add(is1);
  outerStruct.structArray.add(is2);
  outerStruct.map=new TreeMap<>();
  outerStruct.map.put("twelve",new InnerStruct(0,5L));
  outerStruct.map.put("fifteen",new InnerStruct(-5,-10L));
  outerStruct.innerStruct=new InnerStruct(18,19L);
  actual=toBinarySlice(outerStruct,getInspector(OuterStruct.class));
  com.facebook.presto.spi.type.Type innerRowType=new RowType(ImmutableList.of(BIGINT,BIGINT),Optional.empty());
  com.facebook.presto.spi.type.Type arrayOfInnerRowType=new ArrayType(innerRowType);
  com.facebook.presto.spi.type.Type mapOfInnerRowType=new MapType(VARCHAR,innerRowType);
  List<com.facebook.presto.spi.type.Type> outerRowParameterTypes=ImmutableList.of(BIGINT,BIGINT,BIGINT,BIGINT,DOUBLE,DOUBLE,VARCHAR,VARCHAR,arrayOfInnerRowType,mapOfInnerRowType,innerRowType);
  ImmutableList.Builder<Object> outerRowValues=ImmutableList.builder();
  outerRowValues.add(1);
  outerRowValues.add(2);
  outerRowValues.add(3);
  outerRowValues.add(4L);
  outerRowValues.add(5.01f);
  outerRowValues.add(6.001d);
  outerRowValues.add("seven");
  outerRowValues.add(new byte[]{'2'});
  outerRowValues.add(arraySliceOf(innerRowType,rowSliceOf(ImmutableList.of(BIGINT,BIGINT),2,-5L),rowSliceOf(ImmutableList.of(BIGINT,BIGINT),-10,0)));
  BlockBuilder blockBuilder=new VariableWidthBlockBuilder(new BlockBuilderStatus(),1024);
  VARCHAR.writeString(blockBuilder,"fifteen");
  innerRowType.writeSlice(blockBuilder,rowSliceOf(ImmutableList.of(BIGINT,BIGINT),-5,-10L));
  VARCHAR.writeString(blockBuilder,"twelve");
  innerRowType.writeSlice(blockBuilder,rowSliceOf(ImmutableList.of(BIGINT,BIGINT),0,5L));
  outerRowValues.add(buildStructuralSlice(blockBuilder));
  outerRowValues.add(rowSliceOf(ImmutableList.of(BIGINT,BIGINT),18,19L));
  assertEquals(actual,rowSliceOf(outerRowParameterTypes,outerRowValues.build().toArray()));
}
