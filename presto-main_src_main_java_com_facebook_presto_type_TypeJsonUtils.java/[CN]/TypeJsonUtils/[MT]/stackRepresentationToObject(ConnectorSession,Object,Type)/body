{
  if (value == null) {
    return null;
  }
  if (type instanceof ArrayType) {
    return arrayStackRepresentationToObject(session,checkType(value,String.class,"value"),((ArrayType)type).getElementType());
  }
  if (type instanceof MapType) {
    return mapStackRepresentationToObject(session,checkType(value,String.class,"value"),((MapType)type).getKeyType(),((MapType)type).getValueType());
  }
  BlockBuilder blockBuilder=type.createBlockBuilder(new BlockBuilderStatus());
  if (type.getJavaType() == boolean.class) {
    type.writeBoolean(blockBuilder,checkType(value,Boolean.class,"value"));
  }
 else   if (type.getJavaType() == long.class) {
    type.writeLong(blockBuilder,checkType(value,Long.class,"value"));
  }
 else   if (type.getJavaType() == double.class) {
    type.writeDouble(blockBuilder,checkType(value,Double.class,"value"));
  }
 else   if (type.getJavaType() == Slice.class) {
    if (value instanceof String) {
      value=Slices.utf8Slice((String)value);
    }
    type.writeSlice(blockBuilder,checkType(value,Slice.class,"value"));
  }
  return type.getObjectValue(session,blockBuilder.build(),0);
}
