{
  SimpleMarker low=new SimpleMarker(true,new SerializableNativeValue(Long.class,new Long(10)));
  SimpleMarker high=new SimpleMarker(false,new SerializableNativeValue(Long.class,new Long(100)));
  List<SimpleRange> ranges=ImmutableList.of(new SimpleRange(Optional.ofNullable(low),Optional.ofNullable(high)));
  SimpleDomain expected=new SimpleDomain(true,Optional.ofNullable(ranges));
  String json=codec.toJson(expected);
  SimpleDomain actual=codec.fromJson(json);
  assertEquals(actual,expected);
}
