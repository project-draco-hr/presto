{
  if (left != null && right != null) {
    if (left instanceof Double || right instanceof Double) {
      left=((Number)left).doubleValue();
      right=((Number)right).doubleValue();
    }
    if (left.equals(right)) {
      return null;
    }
  }
  if (expectedType == double.class && left != null) {
    left=((Number)left).doubleValue();
  }
  return left;
}
