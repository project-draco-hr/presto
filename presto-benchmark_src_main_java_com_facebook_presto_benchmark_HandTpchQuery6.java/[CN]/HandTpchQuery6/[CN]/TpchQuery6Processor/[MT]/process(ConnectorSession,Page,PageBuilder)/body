{
  Block discountBlock=page.getBlock(1);
  for (int position=0; position < page.getPositionCount(); position++) {
    if (filter(position,discountBlock,page.getBlock(2),page.getBlock(3))) {
      project(position,pageBuilder,page.getBlock(0),discountBlock);
    }
  }
}
