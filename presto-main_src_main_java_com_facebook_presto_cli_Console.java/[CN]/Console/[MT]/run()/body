{
  MemoryHistory history=new MemoryHistory();
  try (LineReader reader=new LineReader()){
    reader.setHistory(history);
    while (true) {
      String line=reader.readLine("presto> ");
      if (line == null) {
        return;
      }
      line=line.trim();
      if (line.isEmpty()) {
        continue;
      }
      try {
        if (!process(line)) {
          return;
        }
      }
 catch (      Exception e) {
        System.out.println("error running command");
      }
    }
  }
 catch (  IOException e) {
    System.err.println("readline error: " + e.getMessage());
  }
}
