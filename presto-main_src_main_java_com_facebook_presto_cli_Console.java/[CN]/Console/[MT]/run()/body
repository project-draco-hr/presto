{
  try (LineReader reader=new LineReader(getHistory())){
    while (true) {
      String line=reader.readLine("presto> ");
      if (line == null) {
        return;
      }
      line=line.trim();
      if (line.isEmpty()) {
        continue;
      }
      try {
        if (!process(line)) {
          return;
        }
      }
 catch (      Exception e) {
        System.out.println("error running command: " + e.getMessage());
        if (debug) {
          e.printStackTrace();
        }
      }
    }
  }
 catch (  IOException e) {
    System.err.println("readline error: " + e.getMessage());
  }
}
