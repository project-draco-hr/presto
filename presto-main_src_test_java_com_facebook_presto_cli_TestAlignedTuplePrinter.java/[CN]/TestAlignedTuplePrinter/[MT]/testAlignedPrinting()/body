{
  StringWriter writer=new StringWriter();
  List<String> fieldNames=ImmutableList.of("first","last","quantity");
  OutputHandler printer=new AlignedTuplePrinter(fieldNames,writer);
  printer.process(row("hello","world",123));
  printer.process(row("a",null,4.5));
  printer.process(row("some long\ntext that\ndoes not\nfit on\none line","more\ntext",4567));
  printer.process(row("bye","done",-15));
  printer.finish();
  String expected="" + "   first   | last  | quantity \n" + "-----------+-------+----------\n"+ " hello     | world |      123 \n"+ " a         | NULL  |      4.5 \n"+ " some long+| more +|     4567 \n"+ " text that+| text  |          \n"+ " does not +|       |          \n"+ " fit on   +|       |          \n"+ " one line  |       |          \n"+ " bye       | done  |      -15 \n"+ "(4 rows)\n";
  assertEquals(writer.getBuffer().toString(),expected);
}
