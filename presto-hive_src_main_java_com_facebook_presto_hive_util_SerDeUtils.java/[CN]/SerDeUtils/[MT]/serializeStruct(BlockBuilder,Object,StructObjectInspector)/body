{
  if (object == null) {
    checkNotNull(builder,"parent builder is null").appendNull();
    return null;
  }
  BlockBuilder currentBuilder=createBlockBuilder();
  for (  StructField field : inspector.getAllStructFieldRefs()) {
    serializeObject(currentBuilder,inspector.getStructFieldData(object,field),field.getFieldObjectInspector());
  }
  SliceOutput out=new DynamicSliceOutput(1024);
  currentBuilder.getEncoding().writeBlock(out,currentBuilder.build());
  if (builder != null) {
    VARBINARY.writeSlice(builder,out.slice());
  }
  return out.slice();
}
