{
  @SuppressWarnings("MismatchedQueryAndUpdateOfCollection") List<ExchangeLocation> exchangeLocations=new ArrayList<>();
  this.pendingExchangeLocations.drainTo(exchangeLocations);
  ImmutableMultimap.Builder<PlanNodeId,URI> newExchangeLocations=ImmutableMultimap.builder();
  for (  ExchangeLocation exchangeLocation : exchangeLocations) {
    RemoteSourceNode remoteSource=exchangeSources.get(exchangeLocation.getPlanFragmentId());
    newExchangeLocations.put(remoteSource.getId(),exchangeLocation.getUri());
  }
  return newExchangeLocations.build();
}
