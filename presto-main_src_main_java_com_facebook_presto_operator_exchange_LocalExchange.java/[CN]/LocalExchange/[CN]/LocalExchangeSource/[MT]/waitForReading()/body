{
  checkNotHoldsLock(this);
synchronized (this) {
    if (finishing || !buffer.isEmpty()) {
      return NOT_BLOCKED;
    }
  }
  return readWaiter.waitFor();
}
