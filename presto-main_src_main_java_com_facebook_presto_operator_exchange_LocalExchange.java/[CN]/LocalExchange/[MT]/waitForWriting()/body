{
  checkNotHoldsLock(this);
synchronized (this) {
    if (bufferBytes.get() < maxBufferedBytes) {
      return NOT_BLOCKED;
    }
  }
  return writeWaiter.waitFor();
}
