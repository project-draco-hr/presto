{
  checkIndexLength(index,length);
  index+=offset;
  ByteBuffer buf=ByteBuffer.wrap(data,index,length);
  int readBytes=0;
  do {
    int localReadBytes=channelRead(in,buf,position + readBytes);
    if (localReadBytes < 0) {
      if (readBytes == 0) {
        return -1;
      }
      break;
    }
 else     if (localReadBytes == 0) {
      break;
    }
    readBytes+=localReadBytes;
  }
 while (readBytes < length);
  return readBytes;
}
