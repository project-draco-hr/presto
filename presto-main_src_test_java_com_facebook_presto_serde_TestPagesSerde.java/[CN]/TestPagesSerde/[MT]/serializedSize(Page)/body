{
  DynamicSliceOutput sliceOutput=new DynamicSliceOutput(1024);
  writePages(createTestingBlockEncodingManager(),sliceOutput,expectedPage);
  Slice slice=sliceOutput.slice();
  Iterator<Page> pageIterator=readPages(createTestingBlockEncodingManager(),slice.getInput());
  assertPageEquals(pageIterator.next(),expectedPage);
  assertFalse(pageIterator.hasNext());
  return slice.length();
}
