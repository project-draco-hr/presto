{
  verifyTypeClass(type);
  Type existingType=types.putIfAbsent(type.getName().toLowerCase(),type);
  checkState(existingType == null || existingType.equals(type),"Type %s is already registered",type.getName());
}
