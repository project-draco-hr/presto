{
  ImmutableList.Builder<Type> parameterTypes=ImmutableList.builder();
  for (  TypeSignature parameter : signature.getTypeParametersAsTypeSignatures()) {
    Type parameterType=getType(parameter);
    if (parameterType == null) {
      return null;
    }
    parameterTypes.add(parameterType);
  }
  ParametricType parametricType=parametricTypes.get(signature.getBase().toLowerCase(Locale.ENGLISH));
  if (parametricType == null) {
    return null;
  }
  Type instantiatedType=parametricType.createType(parameterTypes.build(),signature.getLiteralParameters());
  checkState(instantiatedType.getTypeSignature().equals(signature),"Instantiated parametric type name (%s) does not match expected name (%s)",instantiatedType,signature);
  return instantiatedType;
}
