{
  checkState(injector != null,"injector was not set");
  DBI dbi=new DBI(injector.getInstance(Key.get(DataSource.class,annotationType)));
  Key<Set<ResultSetMapper<?>>> mappersKey=Key.get(new TypeLiteral<Set<ResultSetMapper<?>>>(){
  }
,annotationType);
  if (injector.getExistingBinding(mappersKey) != null) {
    for (    ResultSetMapper<?> mapper : injector.getInstance(mappersKey)) {
      dbi.registerMapper(mapper);
    }
  }
  return dbi;
}
