{
  CompilerContext context=new CompilerContext();
  MethodDefinition method=classDefinition.declareMethod(context,a(PUBLIC),methodName,type(void.class),ImmutableList.<NamedParameterDefinition>builder().add(arg("session",ConnectorSession.class)).addAll(toBlockParameters(getInputChannels(projection))).add(arg("position",int.class)).add(arg("output",BlockBuilder.class)).build());
  method.comment("Projection: %s",projection.toString());
  Variable positionVariable=context.getVariable("position");
  Variable outputVariable=context.getVariable("output");
  Variable wasNullVariable=context.declareVariable(type(boolean.class),"wasNull");
  Block body=method.getBody().comment("boolean wasNull = false;").putVariable(wasNullVariable,false);
  ByteCodeExpressionVisitor visitor=new ByteCodeExpressionVisitor(callSiteBinder,fieldReferenceCompiler(callSiteBinder,positionVariable,wasNullVariable),metadata.getFunctionRegistry());
  body.getVariable(outputVariable).comment("evaluate projection: " + projection.toString()).append(projection.accept(visitor,context)).append(generateWrite(callSiteBinder,context,wasNullVariable,projection.getType())).ret();
}
