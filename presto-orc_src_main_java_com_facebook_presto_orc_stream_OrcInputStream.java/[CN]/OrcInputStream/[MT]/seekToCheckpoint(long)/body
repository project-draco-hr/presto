{
  int compressedBlockOffset=decodeCompressedBlockOffset(checkpoint);
  int decompressedOffset=decodeDecompressedOffset(checkpoint);
  boolean discardedBuffer;
  if (compressedBlockOffset != currentCompressedBlockOffset) {
    verifyFormat(compressionKind != UNCOMPRESSED,"Reset stream has a compressed block offset but stream is not compressed");
    compressedSliceInput.setPosition(compressedBlockOffset);
    current=EMPTY_SLICE.getInput();
    discardedBuffer=true;
  }
 else {
    discardedBuffer=false;
  }
  if (decompressedOffset != current.position()) {
    current.setPosition(0);
    if (current.available() < decompressedOffset) {
      decompressedOffset-=current.available();
      advance();
    }
    current.setPosition(decompressedOffset);
  }
  return discardedBuffer;
}
