{
  for (int size=0; size < 100; size++) {
    Slice slice=allocate(size);
    assertSlicesEquals(slice,slice);
    Slice other=allocate(size);
    assertSlicesEquals(slice,other);
    slice=allocate(size);
    slice.fill((byte)0xA5);
    assertSlicesEquals(slice,slice);
    other=allocate(size);
    other.fill((byte)0xA5);
    assertSlicesEquals(slice,other);
    assertNotEquals(slice,new Object());
    assertNotEquals(new Object(),slice);
    Slice oneBigger=allocate(size + 1);
    oneBigger.fill((byte)0xA5);
    assertNotEquals(slice,oneBigger);
    assertFalse(slice.equals(0,size,oneBigger,0,size + 1));
    assertTrue(slice.compareTo(0,size,oneBigger,0,size + 1) < 0);
    for (int i=1; i < slice.length(); i++) {
      slice.setByte(i - 1,0xA5);
      assertTrue(slice.equals(i - 1,size - i,other,i - 1,size - i));
      slice.setByte(i,0xFF);
      assertNotEquals(slice,other);
      assertFalse(slice.equals(i,size - i,other,i,size - i));
      assertTrue(slice.compareTo(0,size,oneBigger,0,size + 1) > 0);
    }
  }
}
