{
  for (int size=0; size < 100; size++) {
    Slice slice=allocate(size);
    assertSlicesEquals(slice,slice);
    Slice other=allocate(size);
    assertSlicesEquals(slice,other);
    slice=allocate(size);
    slice.fill((byte)0xA5);
    assertSlicesEquals(slice,slice);
    other=allocate(size);
    other.fill((byte)0xA5);
    assertSlicesEquals(slice,other);
    assertNotEquals(slice,new Object());
    assertNotEquals(new Object(),slice);
    Slice oneBigger=allocate(size + 1);
    oneBigger.fill((byte)0xA5);
    assertNotEquals(slice,oneBigger);
    assertNotEquals(oneBigger,slice);
    assertTrue(slice.compareTo(oneBigger) < 0);
    assertTrue(oneBigger.compareTo(slice) > 0);
    assertFalse(slice.equals(0,size,oneBigger,0,size + 1));
    assertFalse(oneBigger.equals(0,size + 1,slice,0,size));
    assertTrue(slice.compareTo(0,size,oneBigger,0,size + 1) < 0);
    assertTrue(oneBigger.compareTo(0,size + 1,slice,0,size) > 0);
    for (int i=1; i < slice.length(); i++) {
      slice.setByte(i - 1,0xA5);
      assertTrue(slice.equals(i - 1,size - i,other,i - 1,size - i));
      slice.setByte(i,0xFF);
      assertNotEquals(slice,other);
      assertFalse(slice.equals(i,size - i,other,i,size - i));
      assertTrue(slice.compareTo(0,size,oneBigger,0,size + 1) > 0);
    }
    if (slice.length() > 0) {
      assertNotEquals(slice,EMPTY_SLICE);
      assertNotEquals(EMPTY_SLICE,slice);
      assertFalse(slice.equals(0,size,EMPTY_SLICE,0,0));
      assertFalse(EMPTY_SLICE.equals(0,0,slice,0,size));
      assertTrue(slice.compareTo(0,size,EMPTY_SLICE,0,0) > 0);
      assertTrue(EMPTY_SLICE.compareTo(0,0,slice,0,size) < 0);
      try {
        slice.equals(0,size,EMPTY_SLICE,0,size);
        fail("expected IndexOutOfBoundsException");
      }
 catch (      IndexOutOfBoundsException expected) {
      }
      try {
        EMPTY_SLICE.equals(0,size,slice,0,size);
        fail("expected IndexOutOfBoundsException");
      }
 catch (      IndexOutOfBoundsException expected) {
      }
      try {
        slice.compareTo(0,size,EMPTY_SLICE,0,size);
        fail("expected IndexOutOfBoundsException");
      }
 catch (      IndexOutOfBoundsException expected) {
      }
      try {
        EMPTY_SLICE.compareTo(0,size,slice,0,size);
        fail("expected IndexOutOfBoundsException");
      }
 catch (      IndexOutOfBoundsException expected) {
      }
    }
  }
}
