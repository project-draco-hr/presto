{
  TypeRegistry typeRegistry=new TypeRegistry();
  dbi=new DBI("jdbc:h2:mem:test" + System.nanoTime());
  dbi.registerMapper(new TableColumn.Mapper(typeRegistry));
  dummyHandle=dbi.open();
  RaptorConnectorId connectorId=new RaptorConnectorId("raptor");
  InMemoryNodeManager nodeManager=new InMemoryNodeManager();
  nodeManager.addCurrentNodeDatasource(connectorId.toString());
  NodeSupplier nodeSupplier=new RaptorNodeSupplier(nodeManager,connectorId);
  shardManager=new DatabaseShardManager(dbi,nodeSupplier);
  metadata=new RaptorMetadata(connectorId,dbi,shardManager,SHARD_INFO_CODEC,SHARD_DELTA_CODEC);
}
