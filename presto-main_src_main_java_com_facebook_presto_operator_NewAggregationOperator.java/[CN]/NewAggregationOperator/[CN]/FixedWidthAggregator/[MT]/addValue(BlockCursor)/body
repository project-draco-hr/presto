{
  BlockCursor cursor=cursors[input.getChannel()];
  if (step == Step.FINAL) {
    function.addIntermediate(cursor,input.getField(),intermediateValue,0);
  }
 else {
    function.addInput(cursor,input.getField(),intermediateValue,0);
  }
}
