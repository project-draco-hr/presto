{
  checkState(!Thread.holdsLock(this),"Thread must NOT hold a lock on the %s",SharedBuffer.class.getSimpleName());
  ImmutableList.Builder<BufferInfo> infos=ImmutableList.builder();
  for (  NamedBuffer namedBuffer : namedBuffers.values()) {
    infos.add(namedBuffer.getInfo());
  }
  return new SharedBufferInfo(state.get(),masterSequenceId.get(),pagesAdded.get(),infos.build());
}
