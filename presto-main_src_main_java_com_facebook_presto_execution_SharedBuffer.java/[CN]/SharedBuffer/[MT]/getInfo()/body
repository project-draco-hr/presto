{
  ImmutableList.Builder<BufferInfo> infos=ImmutableList.builder();
  for (  NamedQueue namedQueue : namedQueues.values()) {
    infos.add(new BufferInfo(namedQueue.getQueueId(),namedQueue.isFinished(),namedQueue.size(),namedQueue.pagesRemoved()));
  }
  return new SharedBufferInfo(state.get(),masterSequenceId,pagesAdded.get(),infos.build());
}
