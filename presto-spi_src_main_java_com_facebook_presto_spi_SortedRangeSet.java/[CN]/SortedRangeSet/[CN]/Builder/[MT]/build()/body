{
  Collections.sort(ranges,LOW_MARKER_COMPARATOR);
  NavigableMap<Marker,Range> result=new TreeMap<>();
  Range current=null;
  for (  Range next : ranges) {
    if (current == null) {
      current=next;
      continue;
    }
    if (current.overlaps(next) || current.getHigh().isAdjacent(next.getLow())) {
      current=current.span(next);
    }
 else {
      result.put(current.getLow(),current);
      current=next;
    }
  }
  if (current != null) {
    result.put(current.getLow(),current);
  }
  return new SortedRangeSet(type,result);
}
