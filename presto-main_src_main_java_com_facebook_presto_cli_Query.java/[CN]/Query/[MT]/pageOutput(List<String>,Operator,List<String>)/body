{
  ignoreUserInterrupt.set(true);
  ScheduledExecutorService executor=newSingleThreadScheduledExecutor();
  executor.scheduleAtFixedRate(new Runnable(){
    @Override public void run(){
      queryClient.getQueryInfo(false);
    }
  }
,0,(long)PING_INTERVAL.toMillis(),MILLISECONDS);
  try (Pager pager=Pager.create(pagerCommand)){
    @SuppressWarnings("IOResourceOpenedButNotSafelyClosed") OutputStreamWriter writer=new OutputStreamWriter(pager,Charsets.UTF_8);
    OutputHandler outputHandler=new AlignedTuplePrinter(fieldNames,writer);
    processOutput(operator,outputHandler);
  }
  finally {
    executor.shutdown();
  }
}
