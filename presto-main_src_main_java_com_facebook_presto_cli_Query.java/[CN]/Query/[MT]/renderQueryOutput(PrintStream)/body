{
  StatusPrinter statusPrinter=new StatusPrinter(queryClient,out);
  statusPrinter.printInitialStatusUpdates();
  QueryInfo queryInfo=queryClient.getQueryInfo(false);
  if (queryInfo == null) {
    if (queryClient.isCanceled()) {
      out.println("Query aborted by user");
    }
 else {
      out.println("Query is gone (server restarted?)");
    }
    return;
  }
  if (queryInfo.getState().isDone()) {
switch (queryInfo.getState()) {
case CANCELED:
      out.printf("Query %s was canceled\n",queryInfo.getQueryId());
    return;
case FAILED:
  renderFailure(queryInfo,out);
return;
}
}
Operator operator=queryClient.getResultsOperator();
List<String> fieldNames=queryInfo.getFieldNames();
pageOutput(Pager.LESS,operator,fieldNames);
statusPrinter.printFinalInfo();
}
