{
  double rate=inputDataSize / duration.convertTo(TimeUnit.SECONDS);
  if (Double.isNaN(rate) || Double.isInfinite(rate)) {
    return "0Bps";
  }
  DataSize dataSize=new DataSize(rate,Unit.BYTE).convertToMostSuccinctDataSize();
  String unitString;
switch (dataSize.getUnit()) {
case BYTE:
    unitString="Bps";
  break;
case KILOBYTE:
unitString="kBps";
break;
case MEGABYTE:
unitString="MBps";
break;
case GIGABYTE:
unitString="GBps";
break;
case TERABYTE:
unitString="TBps";
break;
case PETABYTE:
unitString="PBps";
break;
default :
throw new IllegalStateException("Unknown data unit: " + dataSize.getUnit());
}
return String.format("%.01f%s",dataSize.getValue(),unitString);
}
