{
  if (block.isNull(position)) {
    return null;
  }
  Slice slice=block.getSlice(position,0,block.getLength(position));
  Block mapBlock=readStructuralBlock(slice);
  Map<Object,Object> map=new HashMap<>();
  for (int i=0; i < mapBlock.getPositionCount(); i+=2) {
    map.put(keyType.getObjectValue(session,mapBlock,i),valueType.getObjectValue(session,mapBlock,i + 1));
  }
  return Collections.unmodifiableMap(map);
}
