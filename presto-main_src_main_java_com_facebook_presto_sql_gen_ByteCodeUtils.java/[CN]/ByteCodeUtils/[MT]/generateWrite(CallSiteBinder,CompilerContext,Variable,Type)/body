{
  if (type.getJavaType() == void.class) {
    return new Block(context).comment("output.appendNull();").invokeInterface(BlockBuilder.class,"appendNull",BlockBuilder.class).pop();
  }
  String methodName="write" + Primitives.wrap(type.getJavaType()).getSimpleName();
  Variable tempValue=context.createTempVariable(type.getJavaType());
  Variable tempOutput=context.createTempVariable(BlockBuilder.class);
  return new Block(context).comment("if (wasNull)").append(new IfStatement().condition(new Block(context).getVariable(wasNullVariable)).ifTrue(new Block(context).comment("output.appendNull();").pop(type.getJavaType()).invokeInterface(BlockBuilder.class,"appendNull",BlockBuilder.class).pop()).ifFalse(new Block(context).comment(type.getTypeSignature() + "." + methodName+ "(output, "+ type.getJavaType().getSimpleName()+ ")").putVariable(tempValue).putVariable(tempOutput).append(loadConstant(context,callSiteBinder.bind(type,Type.class))).getVariable(tempOutput).getVariable(tempValue).invokeInterface(Type.class,methodName,void.class,BlockBuilder.class,type.getJavaType())));
}
