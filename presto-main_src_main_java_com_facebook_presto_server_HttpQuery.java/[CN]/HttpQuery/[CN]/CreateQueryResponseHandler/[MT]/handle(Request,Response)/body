{
  try {
    if (isDone()) {
      return null;
    }
    if (response.getStatusCode() != 201) {
      throw new UnexpectedResponseException(String.format("Expected response code to be 201 CREATED, but was %d %s",response.getStatusCode(),response.getStatusMessage()),request,response);
    }
    String location=response.getHeader("Location");
    if (location == null) {
      throw new UnexpectedResponseException("Response does not contain a Location header",request,response);
    }
    URI queryUri=URI.create(location);
    setCurrentRequest(httpClient.execute(prepareGet().setUri(queryUri).build(),new PageResponseHandler(queryUri)));
    return null;
  }
 catch (  Throwable e) {
    fail(e);
    throw Throwables.propagate(e);
  }
}
