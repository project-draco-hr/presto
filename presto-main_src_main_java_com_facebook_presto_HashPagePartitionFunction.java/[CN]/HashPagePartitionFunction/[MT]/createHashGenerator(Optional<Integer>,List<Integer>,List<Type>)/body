{
  if (hashChannel.isPresent()) {
    return new PrecomputedHashGenerator(hashChannel.get());
  }
  ImmutableList.Builder<Type> hashTypes=ImmutableList.builder();
  int[] hashChannels=new int[partitioningChannels.size()];
  for (int i=0; i < partitioningChannels.size(); i++) {
    int channel=partitioningChannels.get(i);
    hashTypes.add(types.get(channel));
    hashChannels[i]=channel;
  }
  return new InterpretedHashGenerator(hashTypes.build(),hashChannels);
}
