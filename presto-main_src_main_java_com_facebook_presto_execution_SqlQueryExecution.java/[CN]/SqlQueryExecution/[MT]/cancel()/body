{
  while (true) {
    QueryState queryState=this.queryState.get();
    if (queryState.isDone()) {
      return;
    }
    if (this.queryState.compareAndSet(queryState,QueryState.CANCELED)) {
      break;
    }
  }
  StageExecution stageExecution=outputStage.get();
  if (stageExecution != null) {
    stageExecution.cancel();
  }
}
