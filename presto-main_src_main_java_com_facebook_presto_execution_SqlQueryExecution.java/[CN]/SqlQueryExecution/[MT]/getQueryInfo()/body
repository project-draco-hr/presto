{
  try (SetThreadName ignored=new SetThreadName("Query-%s",stateMachine.getQueryId())){
    SqlStageExecution outputStage=this.outputStage.get();
    QueryInfo finalQueryInfo=this.finalQueryInfo.get();
    if (finalQueryInfo != null) {
      return finalQueryInfo;
    }
    StageInfo stageInfo=null;
    if (outputStage != null) {
      stageInfo=outputStage.getStageInfo();
    }
    return stateMachine.getQueryInfo(stageInfo);
  }
 }
