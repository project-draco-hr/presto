{
  try (SetThreadName ignored=new SetThreadName("HttpRemoteTask-%s",taskId)){
    while (true) {
      TaskInfo currentState=taskInfo.get();
      if (maxWait.toMillis() <= 1 || currentState.getState().isDone()) {
        return maxWait;
      }
      maxWait=taskInfo.waitForStateChange(currentState,maxWait);
    }
  }
 }
