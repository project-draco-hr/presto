{
synchronized (lock) {
    if (finished) {
      return Futures.immediateFuture(null);
    }
    if (future == null) {
      future=SettableFuture.create();
    }
    return future;
  }
}
