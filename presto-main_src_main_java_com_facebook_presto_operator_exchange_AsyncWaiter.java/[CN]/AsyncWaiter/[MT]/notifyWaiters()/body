{
  SettableFuture<?> future;
synchronized (lock) {
    future=this.future;
    this.future=null;
  }
  if (future != null) {
    future.set(null);
  }
}
