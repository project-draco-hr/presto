{
  if (!context.isDefaultRewrite()) {
    PlanNode result=nodeRewriter.rewriteIndexJoin(node,context.get(),PlanRewriter.this);
    if (result != null) {
      return result;
    }
  }
  PlanNode probeSource=rewrite(node.getProbeSource(),context.get());
  PlanNode indexSource=rewrite(node.getIndexSource(),context.get());
  if (probeSource != node.getProbeSource() || indexSource != node.getIndexSource()) {
    return new IndexJoinNode(node.getId(),node.getType(),probeSource,indexSource,node.getCriteria());
  }
  return node;
}
