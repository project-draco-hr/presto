{
  Map<Symbol,Expression> outputs=Maps.transformValues(outputAnalysis,new Function<AnalyzedExpression,Expression>(){
    @Override public Expression apply(    AnalyzedExpression input){
      return TreeRewriter.rewriteWith(substitution(substitutions),input.getRewrittenExpression());
    }
  }
);
  return new ProjectNode(root,outputs);
}
