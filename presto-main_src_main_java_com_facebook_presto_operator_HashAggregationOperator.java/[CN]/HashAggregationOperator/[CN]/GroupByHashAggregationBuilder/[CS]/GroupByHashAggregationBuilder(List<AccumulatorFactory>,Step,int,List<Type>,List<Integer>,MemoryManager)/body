{
  this.groupByHash=new GroupByHash(groupByTypes,Ints.toArray(groupByChannels),expectedGroups);
  this.memoryManager=memoryManager;
  ImmutableList.Builder<Aggregator> builder=ImmutableList.builder();
  checkNotNull(accumulatorFactories,"accumulatorFactories is null");
  for (int i=0; i < accumulatorFactories.size(); i++) {
    AccumulatorFactory accumulatorFactory=accumulatorFactories.get(i);
    builder.add(new Aggregator(accumulatorFactory,step));
  }
  aggregators=builder.build();
}
