{
  BlockBuilder blockBuilder=state.getBlockBuilder();
  if (blockBuilder == null) {
    blockBuilder=new VariableWidthBlockBuilder(new BlockBuilderStatus());
    state.setBlockBuilder(blockBuilder);
  }
  long startSize=blockBuilder.getRetainedSizeInBytes();
  type.appendTo(value,position,blockBuilder);
  state.addMemoryUsage(blockBuilder.getRetainedSizeInBytes() - startSize);
}
