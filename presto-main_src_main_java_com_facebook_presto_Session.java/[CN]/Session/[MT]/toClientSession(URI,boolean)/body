{
  ImmutableMap.Builder<String,String> properties=ImmutableMap.builder();
  properties.putAll(systemProperties);
  for (  Entry<String,Map<String,String>> catalogProperties : this.catalogProperties.entrySet()) {
    String catalog=catalogProperties.getKey();
    for (    Entry<String,String> entry : catalogProperties.getValue().entrySet()) {
      properties.put(catalog + "." + entry.getKey(),entry.getValue());
    }
  }
  return new ClientSession(requireNonNull(server,"server is null"),identity.getUser(),source.orElse(null),catalog.orElse(null),schema.orElse(null),timeZoneKey.getId(),locale,properties.build(),debug);
}
