{
  Block block;
  if (channel >= 0) {
    block=page.getBlock(channel);
  }
 else {
    block=null;
  }
  if (step == Step.FINAL) {
    BlockCursor cursor=block.cursor();
    while (cursor.advanceNextPosition()) {
      function.addIntermediate(cursor,intermediateValue,0);
    }
  }
 else {
    function.addInput(page.getPositionCount(),block,intermediateValue,0);
  }
}
