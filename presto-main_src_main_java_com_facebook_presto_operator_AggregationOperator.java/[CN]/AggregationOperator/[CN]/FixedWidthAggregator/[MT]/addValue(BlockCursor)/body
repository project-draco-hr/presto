{
  BlockCursor cursor;
  if (channel >= 0) {
    cursor=cursors[channel];
  }
 else {
    cursor=null;
  }
  if (step == Step.FINAL) {
    function.addIntermediate(cursor,intermediateValue,0);
  }
 else {
    function.addInput(cursor,intermediateValue,0);
  }
}
