{
  if (step == Step.FINAL) {
    BlockCursor cursor=page.getBlock(channel).cursor();
    while (cursor.advanceNextPosition()) {
      intermediateValue=function.addIntermediate(cursor,intermediateValue);
    }
  }
 else {
    Block block;
    if (channel >= 0) {
      block=page.getBlock(channel);
    }
 else {
      block=null;
    }
    intermediateValue=function.addInput(page.getPositionCount(),block,intermediateValue);
  }
}
