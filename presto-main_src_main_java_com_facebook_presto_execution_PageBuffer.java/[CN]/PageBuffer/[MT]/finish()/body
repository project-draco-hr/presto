{
  state.compareAndSet(BufferState.OPEN,BufferState.FINISHING);
  if (buffer.isEmpty()) {
    cancel();
  }
 else {
    buffer.offer(END_OF_DATA);
  }
}
